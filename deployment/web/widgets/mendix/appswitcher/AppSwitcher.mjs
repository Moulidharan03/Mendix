
(function(l, r) { if (!l || l.getElementById('livereloadscript')) return; r = l.createElement('script'); r.async = 1; r.src = '//' + (self.location.host || 'localhost').split(':')[0] + ':35730/livereload.js?snipver=1'; r.id = 'livereloadscript'; l.getElementsByTagName('head')[0].appendChild(r) })(self.document);
function ___$insertStyle(css) {
    if (!css || typeof window === 'undefined') {
        return;
    }
    const style = document.createElement('style');
    style.setAttribute('type', 'text/css');
    style.innerHTML = css;
    document.head.appendChild(style);
    return css;
}

import React, { createElement, useState, useEffect, useRef, Component } from 'react';

const ExternalLinkIcon = ({ strokeColor, width = 20, height = 20, className = "" }) => (createElement("svg", { className: className, width: width, height: height, viewBox: "0 0 20 20", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
    createElement("path", { d: "M15 10.8333V15.8333C15 16.2754 14.8244 16.6993 14.5118 17.0118C14.1993 17.3244 13.7754 17.5 13.3333 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V6.66667C2.5 6.22464 2.67559 5.80072 2.98816 5.48816C3.30072 5.17559 3.72464 5 4.16667 5H9.16667", stroke: strokeColor, strokeWidth: "1.5", strokeLinecap: "round", strokeLinejoin: "round" }),
    createElement("path", { d: "M12.5 2.5H17.5V7.5", stroke: "white", strokeWidth: "1.5", strokeLinecap: "round", strokeLinejoin: "round" }),
    createElement("path", { d: "M8.33337 11.6667L17.5 2.5", stroke: strokeColor, strokeWidth: "1.5", strokeLinecap: "round", strokeLinejoin: "round" })));

const AppLisItem = ({ data }) => {
    return (createElement("a", { href: data.appURL, className: "appsw_list__link-wrapper" },
        createElement("div", { className: "appsw_list__item", key: data.appId },
            createElement("img", { className: "appsw_item__image", width: "20", height: "20", src: Object.prototype.hasOwnProperty.call(data, "appLogo")
                    ? data.appLogo
                    : "./img/AppSwitcherModule$Images$Mendix_logo.svg" }),
            createElement("span", { className: "appsw_item__name" }, data.appName),
            createElement("a", { href: data.appURL, className: "appsw_list__link-wrapper", target: "_blank", rel: "noreferrer" },
                createElement(ExternalLinkIcon, { className: "appsw_item__external-link", strokeColor: "#FFF" })))));
};

const ForceRefreshIcon = ({ strokeColor, width = 20, height = 20, className = "" }) => (createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", width: width, height: height, className: className, viewBox: "0 0 20 20" },
    createElement("path", { d: "M19.167 3.333v5h-5", stroke: strokeColor, strokeWidth: 1.5, strokeLinecap: "round", strokeLinejoin: "round" }),
    createElement("path", { d: "M17.075 12.5a7.5 7.5 0 11-1.767-7.8l3.859 3.633", stroke: strokeColor, strokeWidth: 1.5, strokeLinecap: "round", strokeLinejoin: "round" })));

const ForceRefreshButton = ({ onClick, forceRefresh }) => {
    const classNames = forceRefresh
        ? "appsw__force-refresh-btn appsw__force-refresh-btn--disabled"
        : "appsw__force-refresh-btn";
    return (createElement("button", { className: classNames, onClick: onClick },
        createElement(ForceRefreshIcon, { strokeColor: "#FFF" })));
};

const AppList = ({ appList, setForceRefresh, forceRefresh }) => {
    const onSetForceRefresh = () => {
        setForceRefresh(true);
    };
    const displayAppList = () => {
        if (appList === undefined) {
            return null;
        }
        if (appList.length === 0) {
            return (createElement("div", { className: "appsw_list__not-found-wrapper" },
                createElement("span", { className: "appsw_not-found-wrapper__message" }, "No apps found")));
        }
        return (createElement("div", { className: "appsw_list-wrapper" },
            createElement("div", { className: "appsw_title-wrapper" },
                createElement("span", { className: "appsw_list__group-title" }, "Your apps"),
                createElement("button", { className: "appsw__force-refresh-btn", onClick: onSetForceRefresh },
                    createElement(ForceRefreshButton, { onClick: onSetForceRefresh, forceRefresh: forceRefresh }))),
            appList.map((appData) => {
                return createElement(AppLisItem, { data: appData, key: appData.appId });
            })));
    };
    return createElement("div", { className: "appsw_AppSwitcher__list" }, displayAppList());
};

const Footer = () => {
    // TODO: Change the logo path
    return (createElement("div", { className: "appsw_AppSwitcher__footer" },
        createElement("img", { className: "appsw_footer__logo", src: "./img/AppSwitcherModule$Images$Mendix_logo.svg" }),
        createElement("div", { className: "appsw_footer__text" },
            createElement("span", { className: "appsw_text__span" }, "Have an idea for an app?"),
            createElement("span", { className: "appsw_text__span" },
                createElement("a", { className: "appsw_span__link", href: "https://new.mendix.com/link/overview/", target: "_blank", rel: "noreferrer" }, "Create an app"),
                " ",
                "or visit the",
                " ",
                createElement("a", { className: "appsw_span__link", href: "https://marketplace.mendix.com/", target: "_blank", rel: "noreferrer" }, "Marketplace")))));
};

/* eslint-disable no-unused-vars */
const MF_CUSTOM_AUTHENTICATION = "AppSwitcherModule.DS_CustomAuthentication";
var LoadingState;
(function (LoadingState) {
    LoadingState["Idle"] = "idle";
    LoadingState["Fetching"] = "fetching";
    LoadingState["Complete"] = "complete";
    LoadingState["Failed"] = "failed";
})(LoadingState || (LoadingState = {}));

const SearchIcon = ({ strokeColor, width = 32, height = 32, className = "" }) => (createElement("svg", { width: width, height: height, className: className, viewBox: "0 0 24 24" },
    createElement("path", { stroke: strokeColor, fill: "transparent", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "1.5", d: "M14.406 18.573A7.874 7.874 0 108.246 4.08a7.874 7.874 0 006.16 14.493zM16.893 16.893L23 23.001" })));

const SkeletonLoader = () => {
    const skeletonLoaderItems = [];
    for (let i = 0; i < 5; i++) {
        skeletonLoaderItems.push(createElement("div", { key: i, className: "appsw_skeleton-loader__app-item" },
            createElement("div", { className: "appsw_skeleton-loader__skeleton-box appsw_app-item__icon" }),
            createElement("div", { className: "appsw_app-item__name-wrapper" },
                createElement("div", { className: "appsw_skeleton-loader__skeleton-box appsw_name-wrapper__name" })),
            createElement("div", { className: "appsw_skeleton-loader__skeleton-box appsw_app-item__link" })));
    }
    return (createElement("div", { className: "appsw_AppSwitcher__skeleton-loader" },
        createElement("div", { className: "appsw_skeleton-loader__skeleton-box appsw_skeleton-loader__group-title" }),
        skeletonLoaderItems));
};

const AppSwitcherContent = ({ appListResponse, appListLoadingState, setForceRefresh, authorizationError, forceRefresh, isOpen, positioning }) => {
    const [filteredAppList, setFilteredAppList] = useState();
    const [searchValue, setSearchValue] = useState("");
    useEffect(() => {
        setFilteredAppList(appListResponse);
    }, [appListResponse]);
    const onSearchChange = (event) => {
        const searchQuery = event.target.value;
        setSearchValue(event.target.value);
        if (searchQuery !== "") {
            const result = filterAppList(searchQuery);
            setFilteredAppList(result);
        }
        else {
            setFilteredAppList(appListResponse);
        }
    };
    const filterAppList = (searchQuery) => {
        return appListResponse !== undefined
            ? appListResponse.filter((result) => {
                return result.appName.toLowerCase().includes(searchQuery.toLowerCase());
            })
            : [];
    };
    const classNames = `appsw_AppSwitcher__content ${positioning === "sidebarLeft" && isOpen ? "appsw_AppSwitcher__content--open" : ""}`;
    return (createElement("div", { className: classNames },
        createElement("input", { className: "appsw_content__search-input", type: "text", value: searchValue, onChange: onSearchChange, placeholder: "Search Apps", maxLength: 40 }),
        createElement(SearchIcon, { className: "appsw_search-input__icon", width: 22, height: 22, strokeColor: "#FFFFFF" }),
        appListLoadingState === LoadingState.Complete ? (createElement(AppList, { appList: filteredAppList, setForceRefresh: setForceRefresh, forceRefresh: forceRefresh })) : appListLoadingState === LoadingState.Failed || authorizationError ? (createElement("p", { className: "appsw_error-message" }, "No app here? No worries! Try to refresh the page or contact your admin.")) : (createElement(SkeletonLoader, null)),
        createElement(Footer, null)));
};
var AppSwitcherContent$1 = React.memo(AppSwitcherContent);

const SwitcherIcon = ({ dotsFillColor, width = 30, height = 30, className = "" }) => {
    return (createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: className, width: width, height: height, fill: "none", viewBox: "0 0 32 32" },
        createElement("path", { id: "switcherIconDots", fill: dotsFillColor, fillRule: "evenodd", clipRule: "evenodd", d: "M8 10a2 2 0 100-4 2 2 0 000 4zM8 18a2 2 0 100-4 2 2 0 000 4zM16 18a2 2 0 100-4 2 2 0 000 4zM24 18a2 2 0 100-4 2 2 0 000 4zM8 26a2 2 0 100-4 2 2 0 000 4zM16 26a2 2 0 100-4 2 2 0 000 4zM24 26a2 2 0 100-4 2 2 0 000 4zM16 10a2 2 0 100-4 2 2 0 000 4zM24 10a2 2 0 100-4 2 2 0 000 4z" })));
};

const ToggleButton = ({ onClick }) => {
    return (createElement("button", { className: "appsw_AppSwitcher__toggle-button", onClick: onClick },
        createElement(SwitcherIcon, { className: "appsw_togge-button__switcher-icon", dotsFillColor: "#FFFFFF" })));
};

const getCustomAuthToken = async () => {
    const result = new Promise((resolve, reject) => {
        window.mx.data.action({
            params: {
                actionname: MF_CUSTOM_AUTHENTICATION
            },
            callback: (response) => {
                const customAuthentication = JSON.parse(response);
                resolve(customAuthentication);
            },
            error: e => {
                reject(e);
            }
        });
    });
    return result;
};

const useFetchAppList = (isOpen, forceRefresh, baseURL) => {
    const [loadingState, setLoadingState] = useState(LoadingState.Idle);
    const [appList, setAppList] = useState([]);
    const [tokenIsValid, setTokenIsValid] = useState(false);
    const [authorizationError, setAuthorizationError] = useState(false);
    const [fetchCount, setFetchCount] = useState(0);
    const [timeStamp, setTimeStamp] = useState();
    const [authenticationData, setAuthenticationData] = useState();
    const shouldRefreshAuthToken = () => {
        if (!timeStamp || !authenticationData) {
            return true;
        }
        const now = new Date();
        const diffInSeconds = Math.round((now.getTime() - timeStamp.getTime()) / 1000);
        return diffInSeconds >= authenticationData.timeToLive || fetchCount >= authenticationData.timesToUse;
    };
    useEffect(() => {
        if (shouldRefreshAuthToken()) {
            setTokenIsValid(false);
            return;
        }
        if (isOpen) {
            fetchAppList();
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [authenticationData, forceRefresh, isOpen]); // Warning: fetchAppList can't be added as dependency because it will create a loop.
    useEffect(() => {
        if (!tokenIsValid) {
            getCustomAuthToken().then(customAuthentication => {
                if (!customAuthentication.authorization) {
                    setAuthorizationError(true);
                    return;
                }
                setAuthenticationData(customAuthentication);
                setFetchCount(0);
                setTokenIsValid(true);
                setTimeStamp(new Date());
            });
        }
    }, [tokenIsValid]);
    const fetchAppList = async () => {
        if (!authenticationData || !authenticationData.authorization || loadingState === LoadingState.Fetching) {
            return;
        }
        setLoadingState(LoadingState.Fetching);
        setFetchCount(fetchCount => fetchCount + 1);
        const url = `${baseURL}/users/${authenticationData.userId}/apps?refresh=${forceRefresh}`;
        const options = {
            method: "GET",
            headers: {
                Authorization: authenticationData.authorization,
                Accept: "application/json",
                "Content-Type": "application/json"
            }
        };
        fetch(url, options)
            .then(response => {
            if (!response.ok || response.status >= 400) {
                setTokenIsValid(false);
                return;
            }
            const json = response.json();
            setLoadingState(LoadingState.Complete);
            return json;
        })
            .then(json => {
            if (json) {
                setAppList(json);
            }
        })
            .catch(() => {
            setTokenIsValid(false);
            setLoadingState(LoadingState.Failed);
            console.error("AppSwitcher >> Invalid token. Please refresh it.");
        });
    };
    return { authorizationError, appListLoadingState: loadingState, appList };
};

const AppSwitcherContainer = (props) => {
    const [isOpen, setIsOpen] = useState(false);
    const ref = useRef(null);
    const [forceRefresh, setForceRefresh] = useState(false);
    const { appListLoadingState, appList, authorizationError } = useFetchAppList(isOpen, forceRefresh, props.baseUrl);
    const onToggle = () => {
        setIsOpen(!isOpen);
    };
    useEffect(() => {
        const onOutsideClick = (event) => {
            if (isOpen && ref.current && !ref.current.contains(event.target)) {
                setIsOpen(false);
                setForceRefresh(false);
            }
        };
        document.addEventListener("mousedown", onOutsideClick);
        return () => {
            document.removeEventListener("mousedown", onOutsideClick);
        };
    }, [isOpen]);
    const classNames = `appsw_AppSwitcher ${props.positioning === "sidebarLeft" ? "appsw_AppSwitcher--sidebar-left" : ""}`;
    return (createElement("div", { className: classNames, ref: ref },
        createElement(ToggleButton, { onClick: onToggle }),
        isOpen && (createElement(AppSwitcherContent$1, { appListResponse: appList, appListLoadingState: appListLoadingState, setForceRefresh: setForceRefresh, authorizationError: authorizationError, forceRefresh: forceRefresh, isOpen: isOpen, positioning: props.positioning }))));
};

class AppSwitcher extends Component {
    render() {
        return (createElement(AppSwitcherContainer, { baseUrl: this.props.baseUrl, positioning: this.props.positioning, name: "", class: "" }));
    }
}

export { AppSwitcher as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwU3dpdGNoZXIubWpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvcmVzb3VyY2VzL0V4dGVybmFsTGlua0ljb24udHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvY29udGVudC9BcHBMaXN0SXRlbS50c3giLCIuLi8uLi8uLi8uLi8uLi9zcmMvcmVzb3VyY2VzL0ZvcmNlUmVmcmVzaEljb24udHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvY29udGVudC9Gb3JjZVJlZnJlc2hCdXR0b24udHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvY29udGVudC9BcHBMaXN0LnRzeCIsIi4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0Zvb3Rlci50c3giLCIuLi8uLi8uLi8uLi8uLi9zcmMvY29uc3RhbnRzLnRzIiwiLi4vLi4vLi4vLi4vLi4vc3JjL3Jlc291cmNlcy9TZWFyY2hJY29uLnRzeCIsIi4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2NvbnRlbnQvU2tlbGV0b25Mb2FkZXIudHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvQXBwU3dpdGNoZXJDb250ZW50LnRzeCIsIi4uLy4uLy4uLy4uLy4uL3NyYy9yZXNvdXJjZXMvU3dpdGNoZXJJY29uLnRzeCIsIi4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1RvZ2dsZUJ1dHRvbi50c3giLCIuLi8uLi8uLi8uLi8uLi9zcmMvdXRpbHMvaGVscGVyLnRzIiwiLi4vLi4vLi4vLi4vLi4vc3JjL2hvb2tzL3VzZUZldGNoQXBwTGlzdC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0FwcFN3aXRjaGVyQ29udGFpbmVyLnRzeCIsIi4uLy4uLy4uLy4uLy4uL3NyYy9BcHBTd2l0Y2hlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhY3RFbGVtZW50LCBjcmVhdGVFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IEV4dGVybmFsTGlua0ljb24gPSAoe1xuICAgIHN0cm9rZUNvbG9yLFxuICAgIHdpZHRoID0gMjAsXG4gICAgaGVpZ2h0ID0gMjAsXG4gICAgY2xhc3NOYW1lID0gXCJcIlxufToge1xuICAgIHN0cm9rZUNvbG9yOiBzdHJpbmc7XG4gICAgd2lkdGg/OiBudW1iZXI7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGNsYXNzTmFtZT86IHN0cmluZztcbn0pOiBSZWFjdEVsZW1lbnQgPT4gKFxuICAgIDxzdmdcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgIHdpZHRoPXt3aWR0aH1cbiAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMjAgMjBcIlxuICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgID5cbiAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIGQ9XCJNMTUgMTAuODMzM1YxNS44MzMzQzE1IDE2LjI3NTQgMTQuODI0NCAxNi42OTkzIDE0LjUxMTggMTcuMDExOEMxNC4xOTkzIDE3LjMyNDQgMTMuNzc1NCAxNy41IDEzLjMzMzMgMTcuNUg0LjE2NjY3QzMuNzI0NjQgMTcuNSAzLjMwMDcyIDE3LjMyNDQgMi45ODgxNiAxNy4wMTE4QzIuNjc1NTkgMTYuNjk5MyAyLjUgMTYuMjc1NCAyLjUgMTUuODMzM1Y2LjY2NjY3QzIuNSA2LjIyNDY0IDIuNjc1NTkgNS44MDA3MiAyLjk4ODE2IDUuNDg4MTZDMy4zMDA3MiA1LjE3NTU5IDMuNzI0NjQgNSA0LjE2NjY3IDVIOS4xNjY2N1wiXG4gICAgICAgICAgICBzdHJva2U9e3N0cm9rZUNvbG9yfVxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIxLjVcIlxuICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAvPlxuICAgICAgICA8cGF0aCBkPVwiTTEyLjUgMi41SDE3LjVWNy41XCIgc3Ryb2tlPVwid2hpdGVcIiBzdHJva2VXaWR0aD1cIjEuNVwiIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiAvPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgZD1cIk04LjMzMzM3IDExLjY2NjdMMTcuNSAyLjVcIlxuICAgICAgICAgICAgc3Ryb2tlPXtzdHJva2VDb2xvcn1cbiAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMS41XCJcbiAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiXG4gICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgLz5cbiAgICA8L3N2Zz5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IEV4dGVybmFsTGlua0ljb247XG4iLCJpbXBvcnQgUmVhY3QsIHsgUmVhY3RFbGVtZW50LCBjcmVhdGVFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmltcG9ydCB7IEFwcExpc3RSZXNwb25zZSB9IGZyb20gXCIuLi8uLi8uLi90eXBpbmdzL0FwcExpc3RSZXNwb25zZVwiO1xuaW1wb3J0IEV4dGVybmFsTGlua0ljb24gZnJvbSBcIi4uLy4uL3Jlc291cmNlcy9FeHRlcm5hbExpbmtJY29uXCI7XG5cbmNvbnN0IEFwcExpc0l0ZW06IFJlYWN0LkZDPHsgZGF0YTogQXBwTGlzdFJlc3BvbnNlIH0+ID0gKHsgZGF0YSB9KTogUmVhY3RFbGVtZW50ID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8YSBocmVmPXtkYXRhLmFwcFVSTH0gY2xhc3NOYW1lPVwiYXBwc3dfbGlzdF9fbGluay13cmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X2xpc3RfX2l0ZW1cIiBrZXk9e2RhdGEuYXBwSWR9PlxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYXBwc3dfaXRlbV9faW1hZ2VcIlxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjIwXCJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMjBcIlxuICAgICAgICAgICAgICAgICAgICBzcmM9e1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIFwiYXBwTG9nb1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGF0YS5hcHBMb2dvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIi4vaW1nL0FwcFN3aXRjaGVyTW9kdWxlJEltYWdlcyRNZW5kaXhfbG9nby5zdmdcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhcHBzd19pdGVtX19uYW1lXCI+e2RhdGEuYXBwTmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj17ZGF0YS5hcHBVUkx9IGNsYXNzTmFtZT1cImFwcHN3X2xpc3RfX2xpbmstd3JhcHBlclwiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vcmVmZXJyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEV4dGVybmFsTGlua0ljb24gY2xhc3NOYW1lPVwiYXBwc3dfaXRlbV9fZXh0ZXJuYWwtbGlua1wiIHN0cm9rZUNvbG9yPXtcIiNGRkZcIn0gLz5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9hPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBcHBMaXNJdGVtO1xuIiwiaW1wb3J0IHsgUmVhY3RFbGVtZW50LCBjcmVhdGVFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IEZvcmNlUmVmcmVzaEljb24gPSAoe1xuICAgIHN0cm9rZUNvbG9yLFxuICAgIHdpZHRoID0gMjAsXG4gICAgaGVpZ2h0ID0gMjAsXG4gICAgY2xhc3NOYW1lID0gXCJcIlxufToge1xuICAgIHN0cm9rZUNvbG9yOiBzdHJpbmc7XG4gICAgd2lkdGg/OiBudW1iZXI7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGNsYXNzTmFtZT86IHN0cmluZztcbn0pOiBSZWFjdEVsZW1lbnQgPT4gKFxuICAgIDxzdmdcbiAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICBoZWlnaHQ9e2hlaWdodH1cbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMjAgMjBcIlxuICAgID5cbiAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIGQ9XCJNMTkuMTY3IDMuMzMzdjVoLTVcIlxuICAgICAgICAgICAgc3Ryb2tlPXtzdHJva2VDb2xvcn1cbiAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsxLjV9XG4gICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgIC8+XG4gICAgICAgIDxwYXRoXG4gICAgICAgICAgICBkPVwiTTE3LjA3NSAxMi41YTcuNSA3LjUgMCAxMS0xLjc2Ny03LjhsMy44NTkgMy42MzNcIlxuICAgICAgICAgICAgc3Ryb2tlPXtzdHJva2VDb2xvcn1cbiAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsxLjV9XG4gICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgIC8+XG4gICAgPC9zdmc+XG4pO1xuXG5leHBvcnQgZGVmYXVsdCBGb3JjZVJlZnJlc2hJY29uO1xuIiwiaW1wb3J0IFJlYWN0LCB7IFJlYWN0RWxlbWVudCwgY3JlYXRlRWxlbWVudCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IEZvcmNlUmVmcmVzaEljb24gZnJvbSBcIi4uLy4uL3Jlc291cmNlcy9Gb3JjZVJlZnJlc2hJY29uXCI7XG5cbmNvbnN0IEZvcmNlUmVmcmVzaEJ1dHRvbjogUmVhY3QuRkM8eyBvbkNsaWNrOiBSZWFjdC5Nb3VzZUV2ZW50SGFuZGxlcjxIVE1MRWxlbWVudD47IGZvcmNlUmVmcmVzaDogYm9vbGVhbiB9PiA9ICh7XG4gICAgb25DbGljayxcbiAgICBmb3JjZVJlZnJlc2hcbn0pOiBSZWFjdEVsZW1lbnQgPT4ge1xuICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBmb3JjZVJlZnJlc2hcbiAgICAgICAgPyBcImFwcHN3X19mb3JjZS1yZWZyZXNoLWJ0biBhcHBzd19fZm9yY2UtcmVmcmVzaC1idG4tLWRpc2FibGVkXCJcbiAgICAgICAgOiBcImFwcHN3X19mb3JjZS1yZWZyZXNoLWJ0blwiO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e2NsYXNzTmFtZXN9IG9uQ2xpY2s9e29uQ2xpY2t9PlxuICAgICAgICAgICAgPEZvcmNlUmVmcmVzaEljb24gc3Ryb2tlQ29sb3I9e1wiI0ZGRlwifSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9yY2VSZWZyZXNoQnV0dG9uO1xuIiwiaW1wb3J0IHsgUmVhY3RFbGVtZW50LCBjcmVhdGVFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmltcG9ydCBBcHBMaXN0SXRlbSBmcm9tIFwiLi9BcHBMaXN0SXRlbVwiO1xuaW1wb3J0IHsgQXBwTGlzdFByb3BzIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGluZ3MvQXBwTGlzdFByb3BzXCI7XG5pbXBvcnQgeyBBcHBMaXN0UmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vLi4vdHlwaW5ncy9BcHBMaXN0UmVzcG9uc2VcIjtcbmltcG9ydCBGb3JjZVJlZnJlc2hCdXR0b24gZnJvbSBcIi4uL2NvbnRlbnQvRm9yY2VSZWZyZXNoQnV0dG9uXCI7XG5cbmNvbnN0IEFwcExpc3QgPSAoeyBhcHBMaXN0LCBzZXRGb3JjZVJlZnJlc2gsIGZvcmNlUmVmcmVzaCB9OiBBcHBMaXN0UHJvcHMpOiBSZWFjdEVsZW1lbnQgfCBudWxsID0+IHtcbiAgICBjb25zdCBvblNldEZvcmNlUmVmcmVzaCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgc2V0Rm9yY2VSZWZyZXNoKHRydWUpO1xuICAgIH07XG5cbiAgICBjb25zdCBkaXNwbGF5QXBwTGlzdCA9ICgpOiBSZWFjdEVsZW1lbnQgfCBudWxsID0+IHtcbiAgICAgICAgaWYgKGFwcExpc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXBwTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHBzd19saXN0X19ub3QtZm91bmQtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhcHBzd19ub3QtZm91bmQtd3JhcHBlcl9fbWVzc2FnZVwiPk5vIGFwcHMgZm91bmQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwc3dfbGlzdC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHBzd190aXRsZS13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFwcHN3X2xpc3RfX2dyb3VwLXRpdGxlXCI+WW91ciBhcHBzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImFwcHN3X19mb3JjZS1yZWZyZXNoLWJ0blwiIG9uQ2xpY2s9e29uU2V0Rm9yY2VSZWZyZXNofT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JjZVJlZnJlc2hCdXR0b24gb25DbGljaz17b25TZXRGb3JjZVJlZnJlc2h9IGZvcmNlUmVmcmVzaD17Zm9yY2VSZWZyZXNofSAvPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7YXBwTGlzdC5tYXAoKGFwcERhdGE6IEFwcExpc3RSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPEFwcExpc3RJdGVtIGRhdGE9e2FwcERhdGF9IGtleT17YXBwRGF0YS5hcHBJZH0gLz47XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiYXBwc3dfQXBwU3dpdGNoZXJfX2xpc3RcIj57ZGlzcGxheUFwcExpc3QoKX08L2Rpdj47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBcHBMaXN0O1xuIiwiaW1wb3J0IHsgUmVhY3RFbGVtZW50LCBjcmVhdGVFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IEZvb3RlciA9ICgpOiBSZWFjdEVsZW1lbnQgPT4ge1xuICAgIC8vIFRPRE86IENoYW5nZSB0aGUgbG9nbyBwYXRoXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHBzd19BcHBTd2l0Y2hlcl9fZm9vdGVyXCI+XG4gICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cImFwcHN3X2Zvb3Rlcl9fbG9nb1wiIHNyYz1cIi4vaW1nL0FwcFN3aXRjaGVyTW9kdWxlJEltYWdlcyRNZW5kaXhfbG9nby5zdmdcIiAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHBzd19mb290ZXJfX3RleHRcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhcHBzd190ZXh0X19zcGFuXCI+SGF2ZSBhbiBpZGVhIGZvciBhbiBhcHA/PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFwcHN3X3RleHRfX3NwYW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFwcHN3X3NwYW5fX2xpbmtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vbmV3Lm1lbmRpeC5jb20vbGluay9vdmVydmlldy9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbD1cIm5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGUgYW4gYXBwXG4gICAgICAgICAgICAgICAgICAgIDwvYT57XCIgXCJ9XG4gICAgICAgICAgICAgICAgICAgIG9yIHZpc2l0IHRoZXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFwcHN3X3NwYW5fX2xpbmtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vbWFya2V0cGxhY2UubWVuZGl4LmNvbS9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbD1cIm5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBNYXJrZXRwbGFjZVxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBGb290ZXI7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuZXhwb3J0IGNvbnN0IE1GX0NVU1RPTV9BVVRIRU5USUNBVElPTiA9IFwiQXBwU3dpdGNoZXJNb2R1bGUuRFNfQ3VzdG9tQXV0aGVudGljYXRpb25cIjtcblxuZXhwb3J0IGVudW0gTG9hZGluZ1N0YXRlIHtcbiAgICBJZGxlID0gXCJpZGxlXCIsXG4gICAgRmV0Y2hpbmcgPSBcImZldGNoaW5nXCIsXG4gICAgQ29tcGxldGUgPSBcImNvbXBsZXRlXCIsXG4gICAgRmFpbGVkID0gXCJmYWlsZWRcIlxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgUmVhY3RFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IFNlYXJjaEljb24gPSAoe1xuICAgIHN0cm9rZUNvbG9yLFxuICAgIHdpZHRoID0gMzIsXG4gICAgaGVpZ2h0ID0gMzIsXG4gICAgY2xhc3NOYW1lID0gXCJcIlxufToge1xuICAgIHN0cm9rZUNvbG9yOiBzdHJpbmc7XG4gICAgd2lkdGg/OiBudW1iZXI7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGNsYXNzTmFtZT86IHN0cmluZztcbn0pOiBSZWFjdEVsZW1lbnQgPT4gKFxuICAgIDxzdmcgd2lkdGg9e3dpZHRofSBoZWlnaHQ9e2hlaWdodH0gY2xhc3NOYW1lPXtjbGFzc05hbWV9IHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIHN0cm9rZT17c3Ryb2tlQ29sb3J9XG4gICAgICAgICAgICBmaWxsPVwidHJhbnNwYXJlbnRcIlxuICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIxLjVcIlxuICAgICAgICAgICAgZD1cIk0xNC40MDYgMTguNTczQTcuODc0IDcuODc0IDAgMTA4LjI0NiA0LjA4YTcuODc0IDcuODc0IDAgMDA2LjE2IDE0LjQ5M3pNMTYuODkzIDE2Ljg5M0wyMyAyMy4wMDFcIlxuICAgICAgICA+PC9wYXRoPlxuICAgIDwvc3ZnPlxuKTtcblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoSWNvbjtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIFJlYWN0RWxlbWVudCB9IGZyb20gXCJyZWFjdFwiO1xuXG5jb25zdCBTa2VsZXRvbkxvYWRlciA9ICgpOiBSZWFjdEVsZW1lbnQgPT4ge1xuICAgIGNvbnN0IHNrZWxldG9uTG9hZGVySXRlbXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBza2VsZXRvbkxvYWRlckl0ZW1zLnB1c2goXG4gICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPVwiYXBwc3dfc2tlbGV0b24tbG9hZGVyX19hcHAtaXRlbVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwc3dfc2tlbGV0b24tbG9hZGVyX19za2VsZXRvbi1ib3ggYXBwc3dfYXBwLWl0ZW1fX2ljb25cIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X2FwcC1pdGVtX19uYW1lLXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHBzd19za2VsZXRvbi1sb2FkZXJfX3NrZWxldG9uLWJveCBhcHBzd19uYW1lLXdyYXBwZXJfX25hbWVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X3NrZWxldG9uLWxvYWRlcl9fc2tlbGV0b24tYm94IGFwcHN3X2FwcC1pdGVtX19saW5rXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHBzd19BcHBTd2l0Y2hlcl9fc2tlbGV0b24tbG9hZGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X3NrZWxldG9uLWxvYWRlcl9fc2tlbGV0b24tYm94IGFwcHN3X3NrZWxldG9uLWxvYWRlcl9fZ3JvdXAtdGl0bGVcIj48L2Rpdj5cblxuICAgICAgICAgICAge3NrZWxldG9uTG9hZGVySXRlbXN9XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTa2VsZXRvbkxvYWRlcjtcbiIsImltcG9ydCBSZWFjdCwgeyBSZWFjdEVsZW1lbnQsIGNyZWF0ZUVsZW1lbnQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IEFwcExpc3QgZnJvbSBcIi4vY29udGVudC9BcHBMaXN0XCI7XG5pbXBvcnQgeyBBcHBMaXN0UmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vdHlwaW5ncy9BcHBMaXN0UmVzcG9uc2VcIjtcbmltcG9ydCBGb290ZXIgZnJvbSBcIi4vRm9vdGVyXCI7XG5pbXBvcnQgeyBMb2FkaW5nU3RhdGUgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgU2VhcmNoSWNvbiBmcm9tIFwiLi4vcmVzb3VyY2VzL1NlYXJjaEljb25cIjtcbmltcG9ydCBTa2VsZXRvbkxvYWRlciBmcm9tIFwiLi9jb250ZW50L1NrZWxldG9uTG9hZGVyXCI7XG5pbXBvcnQgeyBBcHBTd2l0Y2hlckNvbnRlbnRQcm9wcyB9IGZyb20gXCIuLi8uLi90eXBpbmdzL0FwcFN3aXRjaGVyQ29udGVudFByb3BzXCI7XG5cbmNvbnN0IEFwcFN3aXRjaGVyQ29udGVudCA9ICh7XG4gICAgYXBwTGlzdFJlc3BvbnNlLFxuICAgIGFwcExpc3RMb2FkaW5nU3RhdGUsXG4gICAgc2V0Rm9yY2VSZWZyZXNoLFxuICAgIGF1dGhvcml6YXRpb25FcnJvcixcbiAgICBmb3JjZVJlZnJlc2gsXG4gICAgaXNPcGVuLFxuICAgIHBvc2l0aW9uaW5nXG59OiBBcHBTd2l0Y2hlckNvbnRlbnRQcm9wcyk6IFJlYWN0RWxlbWVudCA9PiB7XG4gICAgY29uc3QgW2ZpbHRlcmVkQXBwTGlzdCwgc2V0RmlsdGVyZWRBcHBMaXN0XSA9IHVzZVN0YXRlPEFwcExpc3RSZXNwb25zZVtdIHwgdW5kZWZpbmVkPigpO1xuICAgIGNvbnN0IFtzZWFyY2hWYWx1ZSwgc2V0U2VhcmNoVmFsdWVdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldEZpbHRlcmVkQXBwTGlzdChhcHBMaXN0UmVzcG9uc2UpO1xuICAgIH0sIFthcHBMaXN0UmVzcG9uc2VdKTtcblxuICAgIGNvbnN0IG9uU2VhcmNoQ2hhbmdlID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50Pik6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBzZWFyY2hRdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgc2V0U2VhcmNoVmFsdWUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcblxuICAgICAgICBpZiAoc2VhcmNoUXVlcnkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckFwcExpc3Qoc2VhcmNoUXVlcnkpO1xuICAgICAgICAgICAgc2V0RmlsdGVyZWRBcHBMaXN0KHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRGaWx0ZXJlZEFwcExpc3QoYXBwTGlzdFJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBmaWx0ZXJBcHBMaXN0ID0gKHNlYXJjaFF1ZXJ5OiBzdHJpbmcpOiBBcHBMaXN0UmVzcG9uc2VbXSA9PiB7XG4gICAgICAgIHJldHVybiBhcHBMaXN0UmVzcG9uc2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBhcHBMaXN0UmVzcG9uc2UuZmlsdGVyKChyZXN1bHQ6IEFwcExpc3RSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5hcHBOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoUXVlcnkudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IFtdO1xuICAgIH07XG5cbiAgICBjb25zdCBjbGFzc05hbWVzID0gYGFwcHN3X0FwcFN3aXRjaGVyX19jb250ZW50ICR7XG4gICAgICAgIHBvc2l0aW9uaW5nID09PSBcInNpZGViYXJMZWZ0XCIgJiYgaXNPcGVuID8gXCJhcHBzd19BcHBTd2l0Y2hlcl9fY29udGVudC0tb3BlblwiIDogXCJcIlxuICAgIH1gO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXN9PlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYXBwc3dfY29udGVudF9fc2VhcmNoLWlucHV0XCJcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFZhbHVlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvblNlYXJjaENoYW5nZX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlYXJjaCBBcHBzXCJcbiAgICAgICAgICAgICAgICBtYXhMZW5ndGg9ezQwfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxTZWFyY2hJY29uIGNsYXNzTmFtZT1cImFwcHN3X3NlYXJjaC1pbnB1dF9faWNvblwiIHdpZHRoPXsyMn0gaGVpZ2h0PXsyMn0gc3Ryb2tlQ29sb3I9XCIjRkZGRkZGXCIgLz5cblxuICAgICAgICAgICAge2FwcExpc3RMb2FkaW5nU3RhdGUgPT09IExvYWRpbmdTdGF0ZS5Db21wbGV0ZSA/IChcbiAgICAgICAgICAgICAgICA8QXBwTGlzdCBhcHBMaXN0PXtmaWx0ZXJlZEFwcExpc3R9IHNldEZvcmNlUmVmcmVzaD17c2V0Rm9yY2VSZWZyZXNofSBmb3JjZVJlZnJlc2g9e2ZvcmNlUmVmcmVzaH0gLz5cbiAgICAgICAgICAgICkgOiBhcHBMaXN0TG9hZGluZ1N0YXRlID09PSBMb2FkaW5nU3RhdGUuRmFpbGVkIHx8IGF1dGhvcml6YXRpb25FcnJvciA/IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJhcHBzd19lcnJvci1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgIE5vIGFwcCBoZXJlPyBObyB3b3JyaWVzISBUcnkgdG8gcmVmcmVzaCB0aGUgcGFnZSBvciBjb250YWN0IHlvdXIgYWRtaW4uXG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8U2tlbGV0b25Mb2FkZXIgLz5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxGb290ZXIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oQXBwU3dpdGNoZXJDb250ZW50KTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIFJlYWN0RWxlbWVudCB9IGZyb20gXCJyZWFjdFwiO1xuXG5jb25zdCBTd2l0Y2hlckljb24gPSAoe1xuICAgIGRvdHNGaWxsQ29sb3IsXG4gICAgd2lkdGggPSAzMCxcbiAgICBoZWlnaHQgPSAzMCxcbiAgICBjbGFzc05hbWUgPSBcIlwiXG59OiB7XG4gICAgZG90c0ZpbGxDb2xvcjogc3RyaW5nO1xuICAgIHdpZHRoPzogbnVtYmVyO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG59KTogUmVhY3RFbGVtZW50ID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8c3ZnXG4gICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDMyIDMyXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICBpZD1cInN3aXRjaGVySWNvbkRvdHNcIlxuICAgICAgICAgICAgICAgIGZpbGw9e2RvdHNGaWxsQ29sb3J9XG4gICAgICAgICAgICAgICAgZmlsbFJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICBjbGlwUnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgIGQ9XCJNOCAxMGEyIDIgMCAxMDAtNCAyIDIgMCAwMDAgNHpNOCAxOGEyIDIgMCAxMDAtNCAyIDIgMCAwMDAgNHpNMTYgMThhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6TTI0IDE4YTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0ek04IDI2YTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0ek0xNiAyNmEyIDIgMCAxMDAtNCAyIDIgMCAwMDAgNHpNMjQgMjZhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6TTE2IDEwYTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0ek0yNCAxMGEyIDIgMCAxMDAtNCAyIDIgMCAwMDAgNHpcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9zdmc+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFN3aXRjaGVySWNvbjtcbiIsImltcG9ydCBSZWFjdCwgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgU3dpdGNoZXJJY29uIGZyb20gXCIuLi9yZXNvdXJjZXMvU3dpdGNoZXJJY29uXCI7XG5cbmNvbnN0IFRvZ2dsZUJ1dHRvbjogUmVhY3QuRkM8eyBvbkNsaWNrOiBSZWFjdC5Nb3VzZUV2ZW50SGFuZGxlcjxIVE1MRWxlbWVudD4gfT4gPSAoeyBvbkNsaWNrIH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImFwcHN3X0FwcFN3aXRjaGVyX190b2dnbGUtYnV0dG9uXCIgb25DbGljaz17b25DbGlja30+XG4gICAgICAgICAgICA8U3dpdGNoZXJJY29uIGNsYXNzTmFtZT1cImFwcHN3X3RvZ2dlLWJ1dHRvbl9fc3dpdGNoZXItaWNvblwiIGRvdHNGaWxsQ29sb3I9XCIjRkZGRkZGXCIgLz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRvZ2dsZUJ1dHRvbjtcbiIsImltcG9ydCB7IEN1c3RvbUF1dGhlbnRpY2F0aW9uRGF0YSB9IGZyb20gXCIuLi8uLi90eXBpbmdzL0N1c3RvbUF1dGhUb2tlblwiO1xuaW1wb3J0IHsgTUZfQ1VTVE9NX0FVVEhFTlRJQ0FUSU9OIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG5leHBvcnQgY29uc3QgZ2V0Q3VzdG9tQXV0aFRva2VuID0gYXN5bmMgKCk6IFByb21pc2U8Q3VzdG9tQXV0aGVudGljYXRpb25EYXRhPiA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IFByb21pc2U8Q3VzdG9tQXV0aGVudGljYXRpb25EYXRhPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHdpbmRvdy5teC5kYXRhLmFjdGlvbih7XG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb25uYW1lOiBNRl9DVVNUT01fQVVUSEVOVElDQVRJT05cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21BdXRoZW50aWNhdGlvbjogQ3VzdG9tQXV0aGVudGljYXRpb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShjdXN0b21BdXRoZW50aWNhdGlvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGUgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IHsgQXBwTGlzdFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3R5cGluZ3MvQXBwTGlzdFJlc3BvbnNlXCI7XG5pbXBvcnQgeyBDdXN0b21BdXRoZW50aWNhdGlvbkRhdGEgfSBmcm9tIFwiLi4vLi4vdHlwaW5ncy9DdXN0b21BdXRoVG9rZW5cIjtcbmltcG9ydCB7IExvYWRpbmdTdGF0ZSB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldEN1c3RvbUF1dGhUb2tlbiB9IGZyb20gXCIuLi91dGlscy9oZWxwZXJcIjtcblxuY29uc3QgdXNlRmV0Y2hBcHBMaXN0ID0gKFxuICAgIGlzT3BlbjogYm9vbGVhbixcbiAgICBmb3JjZVJlZnJlc2g6IGJvb2xlYW4sXG4gICAgYmFzZVVSTDogc3RyaW5nXG4pOiB7XG4gICAgYXV0aG9yaXphdGlvbkVycm9yOiBib29sZWFuO1xuICAgIGFwcExpc3RMb2FkaW5nU3RhdGU6IExvYWRpbmdTdGF0ZTtcbiAgICBhcHBMaXN0OiBBcHBMaXN0UmVzcG9uc2VbXTtcbn0gPT4ge1xuICAgIGNvbnN0IFtsb2FkaW5nU3RhdGUsIHNldExvYWRpbmdTdGF0ZV0gPSB1c2VTdGF0ZTxMb2FkaW5nU3RhdGU+KExvYWRpbmdTdGF0ZS5JZGxlKTtcbiAgICBjb25zdCBbYXBwTGlzdCwgc2V0QXBwTGlzdF0gPSB1c2VTdGF0ZTxBcHBMaXN0UmVzcG9uc2VbXT4oW10pO1xuICAgIGNvbnN0IFt0b2tlbklzVmFsaWQsIHNldFRva2VuSXNWYWxpZF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gICAgY29uc3QgW2F1dGhvcml6YXRpb25FcnJvciwgc2V0QXV0aG9yaXphdGlvbkVycm9yXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgICBjb25zdCBbZmV0Y2hDb3VudCwgc2V0RmV0Y2hDb3VudF0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICAgIGNvbnN0IFt0aW1lU3RhbXAsIHNldFRpbWVTdGFtcF0gPSB1c2VTdGF0ZTxEYXRlPigpO1xuICAgIGNvbnN0IFthdXRoZW50aWNhdGlvbkRhdGEsIHNldEF1dGhlbnRpY2F0aW9uRGF0YV0gPSB1c2VTdGF0ZTxDdXN0b21BdXRoZW50aWNhdGlvbkRhdGE+KCk7XG5cbiAgICBjb25zdCBzaG91bGRSZWZyZXNoQXV0aFRva2VuID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgICAgICBpZiAoIXRpbWVTdGFtcCB8fCAhYXV0aGVudGljYXRpb25EYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGRpZmZJblNlY29uZHMgPSBNYXRoLnJvdW5kKChub3cuZ2V0VGltZSgpIC0gdGltZVN0YW1wLmdldFRpbWUoKSkgLyAxMDAwKTtcbiAgICAgICAgcmV0dXJuIGRpZmZJblNlY29uZHMgPj0gYXV0aGVudGljYXRpb25EYXRhLnRpbWVUb0xpdmUgfHwgZmV0Y2hDb3VudCA+PSBhdXRoZW50aWNhdGlvbkRhdGEudGltZXNUb1VzZTtcbiAgICB9O1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHNob3VsZFJlZnJlc2hBdXRoVG9rZW4oKSkge1xuICAgICAgICAgICAgc2V0VG9rZW5Jc1ZhbGlkKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgICAgIGZldGNoQXBwTGlzdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFthdXRoZW50aWNhdGlvbkRhdGEsIGZvcmNlUmVmcmVzaCwgaXNPcGVuXSk7IC8vIFdhcm5pbmc6IGZldGNoQXBwTGlzdCBjYW4ndCBiZSBhZGRlZCBhcyBkZXBlbmRlbmN5IGJlY2F1c2UgaXQgd2lsbCBjcmVhdGUgYSBsb29wLlxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCF0b2tlbklzVmFsaWQpIHtcbiAgICAgICAgICAgIGdldEN1c3RvbUF1dGhUb2tlbigpLnRoZW4oY3VzdG9tQXV0aGVudGljYXRpb24gPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY3VzdG9tQXV0aGVudGljYXRpb24uYXV0aG9yaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRBdXRob3JpemF0aW9uRXJyb3IodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0QXV0aGVudGljYXRpb25EYXRhKGN1c3RvbUF1dGhlbnRpY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBzZXRGZXRjaENvdW50KDApO1xuICAgICAgICAgICAgICAgIHNldFRva2VuSXNWYWxpZCh0cnVlKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lU3RhbXAobmV3IERhdGUoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIFt0b2tlbklzVmFsaWRdKTtcblxuICAgIGNvbnN0IGZldGNoQXBwTGlzdCA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgaWYgKCFhdXRoZW50aWNhdGlvbkRhdGEgfHwgIWF1dGhlbnRpY2F0aW9uRGF0YS5hdXRob3JpemF0aW9uIHx8IGxvYWRpbmdTdGF0ZSA9PT0gTG9hZGluZ1N0YXRlLkZldGNoaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZXRMb2FkaW5nU3RhdGUoTG9hZGluZ1N0YXRlLkZldGNoaW5nKTtcbiAgICAgICAgc2V0RmV0Y2hDb3VudChmZXRjaENvdW50ID0+IGZldGNoQ291bnQgKyAxKTtcblxuICAgICAgICBjb25zdCB1cmwgPSBgJHtiYXNlVVJMfS91c2Vycy8ke2F1dGhlbnRpY2F0aW9uRGF0YS51c2VySWR9L2FwcHM/cmVmcmVzaD0ke2ZvcmNlUmVmcmVzaH1gO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGF1dGhlbnRpY2F0aW9uRGF0YS5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmZXRjaCh1cmwsIG9wdGlvbnMpXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vayB8fCByZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRva2VuSXNWYWxpZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QganNvbiA9IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICBzZXRMb2FkaW5nU3RhdGUoTG9hZGluZ1N0YXRlLkNvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ganNvbjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihqc29uID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoanNvbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRBcHBMaXN0KGpzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFRva2VuSXNWYWxpZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgc2V0TG9hZGluZ1N0YXRlKExvYWRpbmdTdGF0ZS5GYWlsZWQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBcHBTd2l0Y2hlciA+PiBJbnZhbGlkIHRva2VuLiBQbGVhc2UgcmVmcmVzaCBpdC5cIik7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgYXV0aG9yaXphdGlvbkVycm9yLCBhcHBMaXN0TG9hZGluZ1N0YXRlOiBsb2FkaW5nU3RhdGUsIGFwcExpc3QgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZUZldGNoQXBwTGlzdDtcbiIsImltcG9ydCB7IFJlYWN0RWxlbWVudCwgY3JlYXRlRWxlbWVudCwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5cbmltcG9ydCBBcHBTd2l0Y2hlckNvbnRlbnQgZnJvbSBcIi4vQXBwU3dpdGNoZXJDb250ZW50XCI7XG5pbXBvcnQgVG9nZ2xlQnV0dG9uIGZyb20gXCIuL1RvZ2dsZUJ1dHRvblwiO1xuaW1wb3J0IHVzZUZldGNoQXBwTGlzdCBmcm9tIFwiLi4vaG9va3MvdXNlRmV0Y2hBcHBMaXN0XCI7XG5pbXBvcnQgeyBBcHBTd2l0Y2hlckNvbnRhaW5lclByb3BzIH0gZnJvbSBcIi4uLy4uL3R5cGluZ3MvQXBwU3dpdGNoZXJQcm9wc1wiO1xuXG5jb25zdCBBcHBTd2l0Y2hlckNvbnRhaW5lciA9IChwcm9wczogQXBwU3dpdGNoZXJDb250YWluZXJQcm9wcyk6IFJlYWN0RWxlbWVudCA9PiB7XG4gICAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgIGNvbnN0IHJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gICAgY29uc3QgW2ZvcmNlUmVmcmVzaCwgc2V0Rm9yY2VSZWZyZXNoXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgICBjb25zdCB7IGFwcExpc3RMb2FkaW5nU3RhdGUsIGFwcExpc3QsIGF1dGhvcml6YXRpb25FcnJvciB9ID0gdXNlRmV0Y2hBcHBMaXN0KGlzT3BlbiwgZm9yY2VSZWZyZXNoLCBwcm9wcy5iYXNlVXJsKTtcblxuICAgIGNvbnN0IG9uVG9nZ2xlID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICBzZXRJc09wZW4oIWlzT3Blbik7XG4gICAgfTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9uT3V0c2lkZUNsaWNrID0gKGV2ZW50OiBFdmVudCAmIHsgdGFyZ2V0OiBFbGVtZW50IH0pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGlmIChpc09wZW4gJiYgcmVmLmN1cnJlbnQgJiYgIXJlZi5jdXJyZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldEZvcmNlUmVmcmVzaChmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbk91dHNpZGVDbGljayk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25PdXRzaWRlQ2xpY2spO1xuICAgICAgICB9O1xuICAgIH0sIFtpc09wZW5dKTtcblxuICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBgYXBwc3dfQXBwU3dpdGNoZXIgJHtcbiAgICAgICAgcHJvcHMucG9zaXRpb25pbmcgPT09IFwic2lkZWJhckxlZnRcIiA/IFwiYXBwc3dfQXBwU3dpdGNoZXItLXNpZGViYXItbGVmdFwiIDogXCJcIlxuICAgIH1gO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXN9IHJlZj17cmVmfT5cbiAgICAgICAgICAgIDxUb2dnbGVCdXR0b24gb25DbGljaz17b25Ub2dnbGV9IC8+XG4gICAgICAgICAgICB7aXNPcGVuICYmIChcbiAgICAgICAgICAgICAgICA8QXBwU3dpdGNoZXJDb250ZW50XG4gICAgICAgICAgICAgICAgICAgIGFwcExpc3RSZXNwb25zZT17YXBwTGlzdH1cbiAgICAgICAgICAgICAgICAgICAgYXBwTGlzdExvYWRpbmdTdGF0ZT17YXBwTGlzdExvYWRpbmdTdGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgc2V0Rm9yY2VSZWZyZXNoPXtzZXRGb3JjZVJlZnJlc2h9XG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25FcnJvcj17YXV0aG9yaXphdGlvbkVycm9yfVxuICAgICAgICAgICAgICAgICAgICBmb3JjZVJlZnJlc2g9e2ZvcmNlUmVmcmVzaH1cbiAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXtpc09wZW59XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uaW5nPXtwcm9wcy5wb3NpdGlvbmluZ31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFwcFN3aXRjaGVyQ29udGFpbmVyO1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBSZWFjdE5vZGUsIGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IEFwcFN3aXRjaGVyQ29udGFpbmVyIGZyb20gXCIuL2NvbXBvbmVudHMvQXBwU3dpdGNoZXJDb250YWluZXJcIjtcbmltcG9ydCB7IEFwcFN3aXRjaGVyQ29udGFpbmVyUHJvcHMgfSBmcm9tIFwiLi4vdHlwaW5ncy9BcHBTd2l0Y2hlclByb3BzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcFN3aXRjaGVyIGV4dGVuZHMgQ29tcG9uZW50PEFwcFN3aXRjaGVyQ29udGFpbmVyUHJvcHM+IHtcbiAgICByZW5kZXIoKTogUmVhY3ROb2RlIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxBcHBTd2l0Y2hlckNvbnRhaW5lclxuICAgICAgICAgICAgICAgIGJhc2VVcmw9e3RoaXMucHJvcHMuYmFzZVVybH1cbiAgICAgICAgICAgICAgICBwb3NpdGlvbmluZz17dGhpcy5wcm9wcy5wb3NpdGlvbmluZ31cbiAgICAgICAgICAgICAgICBuYW1lPXtcIlwifVxuICAgICAgICAgICAgICAgIGNsYXNzPXtcIlwifVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQXBwTGlzdEl0ZW0iLCJBcHBTd2l0Y2hlckNvbnRlbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUVBLE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxFQUN0QixXQUFXLEVBQ1gsS0FBSyxHQUFHLEVBQUUsRUFDVixNQUFNLEdBQUcsRUFBRSxFQUNYLFNBQVMsR0FBRyxFQUFFLEVBTWpCLE1BQ0csdUJBQ0ksU0FBUyxFQUFFLFNBQVMsRUFDcEIsS0FBSyxFQUFFLEtBQUssRUFDWixNQUFNLEVBQUUsTUFBTSxFQUNkLE9BQU8sRUFBQyxXQUFXLEVBQ25CLElBQUksRUFBQyxNQUFNLEVBQ1gsS0FBSyxFQUFDLDRCQUE0QjtJQUVsQyx3QkFDSSxDQUFDLEVBQUMsdVNBQXVTLEVBQ3pTLE1BQU0sRUFBRSxXQUFXLEVBQ25CLFdBQVcsRUFBQyxLQUFLLEVBQ2pCLGFBQWEsRUFBQyxPQUFPLEVBQ3JCLGNBQWMsRUFBQyxPQUFPLEdBQ3hCO0lBQ0Ysd0JBQU0sQ0FBQyxFQUFDLG9CQUFvQixFQUFDLE1BQU0sRUFBQyxPQUFPLEVBQUMsV0FBVyxFQUFDLEtBQUssRUFBQyxhQUFhLEVBQUMsT0FBTyxFQUFDLGNBQWMsRUFBQyxPQUFPLEdBQUc7SUFDN0csd0JBQ0ksQ0FBQyxFQUFDLDJCQUEyQixFQUM3QixNQUFNLEVBQUUsV0FBVyxFQUNuQixXQUFXLEVBQUMsS0FBSyxF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
