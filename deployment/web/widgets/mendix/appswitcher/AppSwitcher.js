
(function(l, r) { if (!l || l.getElementById('livereloadscript')) return; r = l.createElement('script'); r.async = 1; r.src = '//' + (self.location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1'; r.id = 'livereloadscript'; l.getElementsByTagName('head')[0].appendChild(r) })(self.document);
define(['react'], (function (React) { 'use strict';

    

    function ___$insertStyle(css) {
        if (!css || typeof window === 'undefined') {
            return;
        }
        const style = document.createElement('style');
        style.setAttribute('type', 'text/css');
        style.innerHTML = css;
        document.head.appendChild(style);
        return css;
    }

    function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

    var React__default = /*#__PURE__*/_interopDefaultLegacy(React);

    const ExternalLinkIcon = ({ strokeColor, width = 20, height = 20, className = "" }) => (React.createElement("svg", { className: className, width: width, height: height, viewBox: "0 0 20 20", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
        React.createElement("path", { d: "M15 10.8333V15.8333C15 16.2754 14.8244 16.6993 14.5118 17.0118C14.1993 17.3244 13.7754 17.5 13.3333 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V6.66667C2.5 6.22464 2.67559 5.80072 2.98816 5.48816C3.30072 5.17559 3.72464 5 4.16667 5H9.16667", stroke: strokeColor, strokeWidth: "1.5", strokeLinecap: "round", strokeLinejoin: "round" }),
        React.createElement("path", { d: "M12.5 2.5H17.5V7.5", stroke: "white", strokeWidth: "1.5", strokeLinecap: "round", strokeLinejoin: "round" }),
        React.createElement("path", { d: "M8.33337 11.6667L17.5 2.5", stroke: strokeColor, strokeWidth: "1.5", strokeLinecap: "round", strokeLinejoin: "round" })));

    const AppLisItem = ({ data }) => {
        return (React.createElement("a", { href: data.appURL, className: "appsw_list__link-wrapper" },
            React.createElement("div", { className: "appsw_list__item", key: data.appId },
                React.createElement("img", { className: "appsw_item__image", width: "20", height: "20", src: Object.prototype.hasOwnProperty.call(data, "appLogo")
                        ? data.appLogo
                        : "./img/AppSwitcherModule$Images$Mendix_logo.svg" }),
                React.createElement("span", { className: "appsw_item__name" }, data.appName),
                React.createElement("a", { href: data.appURL, className: "appsw_list__link-wrapper", target: "_blank", rel: "noreferrer" },
                    React.createElement(ExternalLinkIcon, { className: "appsw_item__external-link", strokeColor: "#FFF" })))));
    };

    const ForceRefreshIcon = ({ strokeColor, width = 20, height = 20, className = "" }) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", width: width, height: height, className: className, viewBox: "0 0 20 20" },
        React.createElement("path", { d: "M19.167 3.333v5h-5", stroke: strokeColor, strokeWidth: 1.5, strokeLinecap: "round", strokeLinejoin: "round" }),
        React.createElement("path", { d: "M17.075 12.5a7.5 7.5 0 11-1.767-7.8l3.859 3.633", stroke: strokeColor, strokeWidth: 1.5, strokeLinecap: "round", strokeLinejoin: "round" })));

    const ForceRefreshButton = ({ onClick, forceRefresh }) => {
        const classNames = forceRefresh
            ? "appsw__force-refresh-btn appsw__force-refresh-btn--disabled"
            : "appsw__force-refresh-btn";
        return (React.createElement("button", { className: classNames, onClick: onClick },
            React.createElement(ForceRefreshIcon, { strokeColor: "#FFF" })));
    };

    const AppList = ({ appList, setForceRefresh, forceRefresh }) => {
        const onSetForceRefresh = () => {
            setForceRefresh(true);
        };
        const displayAppList = () => {
            if (appList === undefined) {
                return null;
            }
            if (appList.length === 0) {
                return (React.createElement("div", { className: "appsw_list__not-found-wrapper" },
                    React.createElement("span", { className: "appsw_not-found-wrapper__message" }, "No apps found")));
            }
            return (React.createElement("div", { className: "appsw_list-wrapper" },
                React.createElement("div", { className: "appsw_title-wrapper" },
                    React.createElement("span", { className: "appsw_list__group-title" }, "Your apps"),
                    React.createElement("button", { className: "appsw__force-refresh-btn", onClick: onSetForceRefresh },
                        React.createElement(ForceRefreshButton, { onClick: onSetForceRefresh, forceRefresh: forceRefresh }))),
                appList.map((appData) => {
                    return React.createElement(AppLisItem, { data: appData, key: appData.appId });
                })));
        };
        return React.createElement("div", { className: "appsw_AppSwitcher__list" }, displayAppList());
    };

    const Footer = () => {
        // TODO: Change the logo path
        return (React.createElement("div", { className: "appsw_AppSwitcher__footer" },
            React.createElement("img", { className: "appsw_footer__logo", src: "./img/AppSwitcherModule$Images$Mendix_logo.svg" }),
            React.createElement("div", { className: "appsw_footer__text" },
                React.createElement("span", { className: "appsw_text__span" }, "Have an idea for an app?"),
                React.createElement("span", { className: "appsw_text__span" },
                    React.createElement("a", { className: "appsw_span__link", href: "https://new.mendix.com/link/overview/", target: "_blank", rel: "noreferrer" }, "Create an app"),
                    " ",
                    "or visit the",
                    " ",
                    React.createElement("a", { className: "appsw_span__link", href: "https://marketplace.mendix.com/", target: "_blank", rel: "noreferrer" }, "Marketplace")))));
    };

    /* eslint-disable no-unused-vars */
    const MF_CUSTOM_AUTHENTICATION = "AppSwitcherModule.DS_CustomAuthentication";
    var LoadingState;
    (function (LoadingState) {
        LoadingState["Idle"] = "idle";
        LoadingState["Fetching"] = "fetching";
        LoadingState["Complete"] = "complete";
        LoadingState["Failed"] = "failed";
    })(LoadingState || (LoadingState = {}));

    const SearchIcon = ({ strokeColor, width = 32, height = 32, className = "" }) => (React.createElement("svg", { width: width, height: height, className: className, viewBox: "0 0 24 24" },
        React.createElement("path", { stroke: strokeColor, fill: "transparent", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "1.5", d: "M14.406 18.573A7.874 7.874 0 108.246 4.08a7.874 7.874 0 006.16 14.493zM16.893 16.893L23 23.001" })));

    const SkeletonLoader = () => {
        const skeletonLoaderItems = [];
        for (let i = 0; i < 5; i++) {
            skeletonLoaderItems.push(React.createElement("div", { key: i, className: "appsw_skeleton-loader__app-item" },
                React.createElement("div", { className: "appsw_skeleton-loader__skeleton-box appsw_app-item__icon" }),
                React.createElement("div", { className: "appsw_app-item__name-wrapper" },
                    React.createElement("div", { className: "appsw_skeleton-loader__skeleton-box appsw_name-wrapper__name" })),
                React.createElement("div", { className: "appsw_skeleton-loader__skeleton-box appsw_app-item__link" })));
        }
        return (React.createElement("div", { className: "appsw_AppSwitcher__skeleton-loader" },
            React.createElement("div", { className: "appsw_skeleton-loader__skeleton-box appsw_skeleton-loader__group-title" }),
            skeletonLoaderItems));
    };

    const AppSwitcherContent = ({ appListResponse, appListLoadingState, setForceRefresh, authorizationError, forceRefresh, isOpen, positioning }) => {
        const [filteredAppList, setFilteredAppList] = React.useState();
        const [searchValue, setSearchValue] = React.useState("");
        React.useEffect(() => {
            setFilteredAppList(appListResponse);
        }, [appListResponse]);
        const onSearchChange = (event) => {
            const searchQuery = event.target.value;
            setSearchValue(event.target.value);
            if (searchQuery !== "") {
                const result = filterAppList(searchQuery);
                setFilteredAppList(result);
            }
            else {
                setFilteredAppList(appListResponse);
            }
        };
        const filterAppList = (searchQuery) => {
            return appListResponse !== undefined
                ? appListResponse.filter((result) => {
                    return result.appName.toLowerCase().includes(searchQuery.toLowerCase());
                })
                : [];
        };
        const classNames = `appsw_AppSwitcher__content ${positioning === "sidebarLeft" && isOpen ? "appsw_AppSwitcher__content--open" : ""}`;
        return (React.createElement("div", { className: classNames },
            React.createElement("input", { className: "appsw_content__search-input", type: "text", value: searchValue, onChange: onSearchChange, placeholder: "Search Apps", maxLength: 40 }),
            React.createElement(SearchIcon, { className: "appsw_search-input__icon", width: 22, height: 22, strokeColor: "#FFFFFF" }),
            appListLoadingState === LoadingState.Complete ? (React.createElement(AppList, { appList: filteredAppList, setForceRefresh: setForceRefresh, forceRefresh: forceRefresh })) : appListLoadingState === LoadingState.Failed || authorizationError ? (React.createElement("p", { className: "appsw_error-message" }, "No app here? No worries! Try to refresh the page or contact your admin.")) : (React.createElement(SkeletonLoader, null)),
            React.createElement(Footer, null)));
    };
    var AppSwitcherContent$1 = React__default["default"].memo(AppSwitcherContent);

    const SwitcherIcon = ({ dotsFillColor, width = 30, height = 30, className = "" }) => {
        return (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: className, width: width, height: height, fill: "none", viewBox: "0 0 32 32" },
            React.createElement("path", { id: "switcherIconDots", fill: dotsFillColor, fillRule: "evenodd", clipRule: "evenodd", d: "M8 10a2 2 0 100-4 2 2 0 000 4zM8 18a2 2 0 100-4 2 2 0 000 4zM16 18a2 2 0 100-4 2 2 0 000 4zM24 18a2 2 0 100-4 2 2 0 000 4zM8 26a2 2 0 100-4 2 2 0 000 4zM16 26a2 2 0 100-4 2 2 0 000 4zM24 26a2 2 0 100-4 2 2 0 000 4zM16 10a2 2 0 100-4 2 2 0 000 4zM24 10a2 2 0 100-4 2 2 0 000 4z" })));
    };

    const ToggleButton = ({ onClick }) => {
        return (React.createElement("button", { className: "appsw_AppSwitcher__toggle-button", onClick: onClick },
            React.createElement(SwitcherIcon, { className: "appsw_togge-button__switcher-icon", dotsFillColor: "#FFFFFF" })));
    };

    const getCustomAuthToken = async () => {
        const result = new Promise((resolve, reject) => {
            window.mx.data.action({
                params: {
                    actionname: MF_CUSTOM_AUTHENTICATION
                },
                callback: (response) => {
                    const customAuthentication = JSON.parse(response);
                    resolve(customAuthentication);
                },
                error: e => {
                    reject(e);
                }
            });
        });
        return result;
    };

    const useFetchAppList = (isOpen, forceRefresh, baseURL) => {
        const [loadingState, setLoadingState] = React.useState(LoadingState.Idle);
        const [appList, setAppList] = React.useState([]);
        const [tokenIsValid, setTokenIsValid] = React.useState(false);
        const [authorizationError, setAuthorizationError] = React.useState(false);
        const [fetchCount, setFetchCount] = React.useState(0);
        const [timeStamp, setTimeStamp] = React.useState();
        const [authenticationData, setAuthenticationData] = React.useState();
        const shouldRefreshAuthToken = () => {
            if (!timeStamp || !authenticationData) {
                return true;
            }
            const now = new Date();
            const diffInSeconds = Math.round((now.getTime() - timeStamp.getTime()) / 1000);
            return diffInSeconds >= authenticationData.timeToLive || fetchCount >= authenticationData.timesToUse;
        };
        React.useEffect(() => {
            if (shouldRefreshAuthToken()) {
                setTokenIsValid(false);
                return;
            }
            if (isOpen) {
                fetchAppList();
            }
            // eslint-disable-next-line react-hooks/exhaustive-deps
        }, [authenticationData, forceRefresh, isOpen]); // Warning: fetchAppList can't be added as dependency because it will create a loop.
        React.useEffect(() => {
            if (!tokenIsValid) {
                getCustomAuthToken().then(customAuthentication => {
                    if (!customAuthentication.authorization) {
                        setAuthorizationError(true);
                        return;
                    }
                    setAuthenticationData(customAuthentication);
                    setFetchCount(0);
                    setTokenIsValid(true);
                    setTimeStamp(new Date());
                });
            }
        }, [tokenIsValid]);
        const fetchAppList = async () => {
            if (!authenticationData || !authenticationData.authorization || loadingState === LoadingState.Fetching) {
                return;
            }
            setLoadingState(LoadingState.Fetching);
            setFetchCount(fetchCount => fetchCount + 1);
            const url = `${baseURL}/users/${authenticationData.userId}/apps?refresh=${forceRefresh}`;
            const options = {
                method: "GET",
                headers: {
                    Authorization: authenticationData.authorization,
                    Accept: "application/json",
                    "Content-Type": "application/json"
                }
            };
            fetch(url, options)
                .then(response => {
                if (!response.ok || response.status >= 400) {
                    setTokenIsValid(false);
                    return;
                }
                const json = response.json();
                setLoadingState(LoadingState.Complete);
                return json;
            })
                .then(json => {
                if (json) {
                    setAppList(json);
                }
            })
                .catch(() => {
                setTokenIsValid(false);
                setLoadingState(LoadingState.Failed);
                console.error("AppSwitcher >> Invalid token. Please refresh it.");
            });
        };
        return { authorizationError, appListLoadingState: loadingState, appList };
    };

    const AppSwitcherContainer = (props) => {
        const [isOpen, setIsOpen] = React.useState(false);
        const ref = React.useRef(null);
        const [forceRefresh, setForceRefresh] = React.useState(false);
        const { appListLoadingState, appList, authorizationError } = useFetchAppList(isOpen, forceRefresh, props.baseUrl);
        const onToggle = () => {
            setIsOpen(!isOpen);
        };
        React.useEffect(() => {
            const onOutsideClick = (event) => {
                if (isOpen && ref.current && !ref.current.contains(event.target)) {
                    setIsOpen(false);
                    setForceRefresh(false);
                }
            };
            document.addEventListener("mousedown", onOutsideClick);
            return () => {
                document.removeEventListener("mousedown", onOutsideClick);
            };
        }, [isOpen]);
        const classNames = `appsw_AppSwitcher ${props.positioning === "sidebarLeft" ? "appsw_AppSwitcher--sidebar-left" : ""}`;
        return (React.createElement("div", { className: classNames, ref: ref },
            React.createElement(ToggleButton, { onClick: onToggle }),
            isOpen && (React.createElement(AppSwitcherContent$1, { appListResponse: appList, appListLoadingState: appListLoadingState, setForceRefresh: setForceRefresh, authorizationError: authorizationError, forceRefresh: forceRefresh, isOpen: isOpen, positioning: props.positioning }))));
    };

    class AppSwitcher extends React.Component {
        render() {
            return (React.createElement(AppSwitcherContainer, { baseUrl: this.props.baseUrl, positioning: this.props.positioning, name: "", class: "" }));
        }
    }

    return AppSwitcher;

}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwU3dpdGNoZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9yZXNvdXJjZXMvRXh0ZXJuYWxMaW5rSWNvbi50c3giLCIuLi8uLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9jb250ZW50L0FwcExpc3RJdGVtLnRzeCIsIi4uLy4uLy4uLy4uLy4uL3NyYy9yZXNvdXJjZXMvRm9yY2VSZWZyZXNoSWNvbi50c3giLCIuLi8uLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9jb250ZW50L0ZvcmNlUmVmcmVzaEJ1dHRvbi50c3giLCIuLi8uLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9jb250ZW50L0FwcExpc3QudHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvRm9vdGVyLnRzeCIsIi4uLy4uLy4uLy4uLy4uL3NyYy9jb25zdGFudHMudHMiLCIuLi8uLi8uLi8uLi8uLi9zcmMvcmVzb3VyY2VzL1NlYXJjaEljb24udHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvY29udGVudC9Ta2VsZXRvbkxvYWRlci50c3giLCIuLi8uLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9BcHBTd2l0Y2hlckNvbnRlbnQudHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL3Jlc291cmNlcy9Td2l0Y2hlckljb24udHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVG9nZ2xlQnV0dG9uLnRzeCIsIi4uLy4uLy4uLy4uLy4uL3NyYy91dGlscy9oZWxwZXIudHMiLCIuLi8uLi8uLi8uLi8uLi9zcmMvaG9va3MvdXNlRmV0Y2hBcHBMaXN0LnRzIiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvQXBwU3dpdGNoZXJDb250YWluZXIudHN4IiwiLi4vLi4vLi4vLi4vLi4vc3JjL0FwcFN3aXRjaGVyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFjdEVsZW1lbnQsIGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuY29uc3QgRXh0ZXJuYWxMaW5rSWNvbiA9ICh7XG4gICAgc3Ryb2tlQ29sb3IsXG4gICAgd2lkdGggPSAyMCxcbiAgICBoZWlnaHQgPSAyMCxcbiAgICBjbGFzc05hbWUgPSBcIlwiXG59OiB7XG4gICAgc3Ryb2tlQ29sb3I6IHN0cmluZztcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgY2xhc3NOYW1lPzogc3RyaW5nO1xufSk6IFJlYWN0RWxlbWVudCA9PiAoXG4gICAgPHN2Z1xuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICBoZWlnaHQ9e2hlaWdodH1cbiAgICAgICAgdmlld0JveD1cIjAgMCAyMCAyMFwiXG4gICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgZD1cIk0xNSAxMC44MzMzVjE1LjgzMzNDMTUgMTYuMjc1NCAxNC44MjQ0IDE2LjY5OTMgMTQuNTExOCAxNy4wMTE4QzE0LjE5OTMgMTcuMzI0NCAxMy43NzU0IDE3LjUgMTMuMzMzMyAxNy41SDQuMTY2NjdDMy43MjQ2NCAxNy41IDMuMzAwNzIgMTcuMzI0NCAyLjk4ODE2IDE3LjAxMThDMi42NzU1OSAxNi42OTkzIDIuNSAxNi4yNzU0IDIuNSAxNS44MzMzVjYuNjY2NjdDMi41IDYuMjI0NjQgMi42NzU1OSA1LjgwMDcyIDIuOTg4MTYgNS40ODgxNkMzLjMwMDcyIDUuMTc1NTkgMy43MjQ2NCA1IDQuMTY2NjcgNUg5LjE2NjY3XCJcbiAgICAgICAgICAgIHN0cm9rZT17c3Ryb2tlQ29sb3J9XG4gICAgICAgICAgICBzdHJva2VXaWR0aD1cIjEuNVwiXG4gICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgIC8+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTIuNSAyLjVIMTcuNVY3LjVcIiBzdHJva2U9XCJ3aGl0ZVwiIHN0cm9rZVdpZHRoPVwiMS41XCIgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIC8+XG4gICAgICAgIDxwYXRoXG4gICAgICAgICAgICBkPVwiTTguMzMzMzcgMTEuNjY2N0wxNy41IDIuNVwiXG4gICAgICAgICAgICBzdHJva2U9e3N0cm9rZUNvbG9yfVxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIxLjVcIlxuICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAvPlxuICAgIDwvc3ZnPlxuKTtcblxuZXhwb3J0IGRlZmF1bHQgRXh0ZXJuYWxMaW5rSWNvbjtcbiIsImltcG9ydCBSZWFjdCwgeyBSZWFjdEVsZW1lbnQsIGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IHsgQXBwTGlzdFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGluZ3MvQXBwTGlzdFJlc3BvbnNlXCI7XG5pbXBvcnQgRXh0ZXJuYWxMaW5rSWNvbiBmcm9tIFwiLi4vLi4vcmVzb3VyY2VzL0V4dGVybmFsTGlua0ljb25cIjtcblxuY29uc3QgQXBwTGlzSXRlbTogUmVhY3QuRkM8eyBkYXRhOiBBcHBMaXN0UmVzcG9uc2UgfT4gPSAoeyBkYXRhIH0pOiBSZWFjdEVsZW1lbnQgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxhIGhyZWY9e2RhdGEuYXBwVVJMfSBjbGFzc05hbWU9XCJhcHBzd19saXN0X19saW5rLXdyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwc3dfbGlzdF9faXRlbVwiIGtleT17ZGF0YS5hcHBJZH0+XG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhcHBzd19pdGVtX19pbWFnZVwiXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMjBcIlxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIyMFwiXG4gICAgICAgICAgICAgICAgICAgIHNyYz17XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwgXCJhcHBMb2dvXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBkYXRhLmFwcExvZ29cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiLi9pbWcvQXBwU3dpdGNoZXJNb2R1bGUkSW1hZ2VzJE1lbmRpeF9sb2dvLnN2Z1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFwcHN3X2l0ZW1fX25hbWVcIj57ZGF0YS5hcHBOYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8YSBocmVmPXtkYXRhLmFwcFVSTH0gY2xhc3NOYW1lPVwiYXBwc3dfbGlzdF9fbGluay13cmFwcGVyXCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9yZWZlcnJlclwiPlxuICAgICAgICAgICAgICAgICAgICA8RXh0ZXJuYWxMaW5rSWNvbiBjbGFzc05hbWU9XCJhcHBzd19pdGVtX19leHRlcm5hbC1saW5rXCIgc3Ryb2tlQ29sb3I9e1wiI0ZGRlwifSAvPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2E+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFwcExpc0l0ZW07XG4iLCJpbXBvcnQgeyBSZWFjdEVsZW1lbnQsIGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuY29uc3QgRm9yY2VSZWZyZXNoSWNvbiA9ICh7XG4gICAgc3Ryb2tlQ29sb3IsXG4gICAgd2lkdGggPSAyMCxcbiAgICBoZWlnaHQgPSAyMCxcbiAgICBjbGFzc05hbWUgPSBcIlwiXG59OiB7XG4gICAgc3Ryb2tlQ29sb3I6IHN0cmluZztcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgY2xhc3NOYW1lPzogc3RyaW5nO1xufSk6IFJlYWN0RWxlbWVudCA9PiAoXG4gICAgPHN2Z1xuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgdmlld0JveD1cIjAgMCAyMCAyMFwiXG4gICAgPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgZD1cIk0xOS4xNjcgMy4zMzN2NWgtNVwiXG4gICAgICAgICAgICBzdHJva2U9e3N0cm9rZUNvbG9yfVxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezEuNX1cbiAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiXG4gICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgLz5cbiAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIGQ9XCJNMTcuMDc1IDEyLjVhNy41IDcuNSAwIDExLTEuNzY3LTcuOGwzLjg1OSAzLjYzM1wiXG4gICAgICAgICAgICBzdHJva2U9e3N0cm9rZUNvbG9yfVxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezEuNX1cbiAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiXG4gICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgLz5cbiAgICA8L3N2Zz5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IEZvcmNlUmVmcmVzaEljb247XG4iLCJpbXBvcnQgUmVhY3QsIHsgUmVhY3RFbGVtZW50LCBjcmVhdGVFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgRm9yY2VSZWZyZXNoSWNvbiBmcm9tIFwiLi4vLi4vcmVzb3VyY2VzL0ZvcmNlUmVmcmVzaEljb25cIjtcblxuY29uc3QgRm9yY2VSZWZyZXNoQnV0dG9uOiBSZWFjdC5GQzx7IG9uQ2xpY2s6IFJlYWN0Lk1vdXNlRXZlbnRIYW5kbGVyPEhUTUxFbGVtZW50PjsgZm9yY2VSZWZyZXNoOiBib29sZWFuIH0+ID0gKHtcbiAgICBvbkNsaWNrLFxuICAgIGZvcmNlUmVmcmVzaFxufSk6IFJlYWN0RWxlbWVudCA9PiB7XG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IGZvcmNlUmVmcmVzaFxuICAgICAgICA/IFwiYXBwc3dfX2ZvcmNlLXJlZnJlc2gtYnRuIGFwcHN3X19mb3JjZS1yZWZyZXNoLWJ0bi0tZGlzYWJsZWRcIlxuICAgICAgICA6IFwiYXBwc3dfX2ZvcmNlLXJlZnJlc2gtYnRuXCI7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17Y2xhc3NOYW1lc30gb25DbGljaz17b25DbGlja30+XG4gICAgICAgICAgICA8Rm9yY2VSZWZyZXNoSWNvbiBzdHJva2VDb2xvcj17XCIjRkZGXCJ9IC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBGb3JjZVJlZnJlc2hCdXR0b247XG4iLCJpbXBvcnQgeyBSZWFjdEVsZW1lbnQsIGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IEFwcExpc3RJdGVtIGZyb20gXCIuL0FwcExpc3RJdGVtXCI7XG5pbXBvcnQgeyBBcHBMaXN0UHJvcHMgfSBmcm9tIFwiLi4vLi4vLi4vdHlwaW5ncy9BcHBMaXN0UHJvcHNcIjtcbmltcG9ydCB7IEFwcExpc3RSZXNwb25zZSB9IGZyb20gXCIuLi8uLi8uLi90eXBpbmdzL0FwcExpc3RSZXNwb25zZVwiO1xuaW1wb3J0IEZvcmNlUmVmcmVzaEJ1dHRvbiBmcm9tIFwiLi4vY29udGVudC9Gb3JjZVJlZnJlc2hCdXR0b25cIjtcblxuY29uc3QgQXBwTGlzdCA9ICh7IGFwcExpc3QsIHNldEZvcmNlUmVmcmVzaCwgZm9yY2VSZWZyZXNoIH06IEFwcExpc3RQcm9wcyk6IFJlYWN0RWxlbWVudCB8IG51bGwgPT4ge1xuICAgIGNvbnN0IG9uU2V0Rm9yY2VSZWZyZXNoID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICBzZXRGb3JjZVJlZnJlc2godHJ1ZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGRpc3BsYXlBcHBMaXN0ID0gKCk6IFJlYWN0RWxlbWVudCB8IG51bGwgPT4ge1xuICAgICAgICBpZiAoYXBwTGlzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcHBMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X2xpc3RfX25vdC1mb3VuZC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFwcHN3X25vdC1mb3VuZC13cmFwcGVyX19tZXNzYWdlXCI+Tm8gYXBwcyBmb3VuZDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHBzd19saXN0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X3RpdGxlLXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYXBwc3dfbGlzdF9fZ3JvdXAtdGl0bGVcIj5Zb3VyIGFwcHM8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYXBwc3dfX2ZvcmNlLXJlZnJlc2gtYnRuXCIgb25DbGljaz17b25TZXRGb3JjZVJlZnJlc2h9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcmNlUmVmcmVzaEJ1dHRvbiBvbkNsaWNrPXtvblNldEZvcmNlUmVmcmVzaH0gZm9yY2VSZWZyZXNoPXtmb3JjZVJlZnJlc2h9IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHthcHBMaXN0Lm1hcCgoYXBwRGF0YTogQXBwTGlzdFJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8QXBwTGlzdEl0ZW0gZGF0YT17YXBwRGF0YX0ga2V5PXthcHBEYXRhLmFwcElkfSAvPjtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJhcHBzd19BcHBTd2l0Y2hlcl9fbGlzdFwiPntkaXNwbGF5QXBwTGlzdCgpfTwvZGl2Pjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFwcExpc3Q7XG4iLCJpbXBvcnQgeyBSZWFjdEVsZW1lbnQsIGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuY29uc3QgRm9vdGVyID0gKCk6IFJlYWN0RWxlbWVudCA9PiB7XG4gICAgLy8gVE9ETzogQ2hhbmdlIHRoZSBsb2dvIHBhdGhcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X0FwcFN3aXRjaGVyX19mb290ZXJcIj5cbiAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPVwiYXBwc3dfZm9vdGVyX19sb2dvXCIgc3JjPVwiLi9pbWcvQXBwU3dpdGNoZXJNb2R1bGUkSW1hZ2VzJE1lbmRpeF9sb2dvLnN2Z1wiIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X2Zvb3Rlcl9fdGV4dFwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFwcHN3X3RleHRfX3NwYW5cIj5IYXZlIGFuIGlkZWEgZm9yIGFuIGFwcD88L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYXBwc3dfdGV4dF9fc3BhblwiPlxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYXBwc3dfc3Bhbl9fbGlua1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly9uZXcubWVuZGl4LmNvbS9saW5rL292ZXJ2aWV3L1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsPVwibm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZSBhbiBhcHBcbiAgICAgICAgICAgICAgICAgICAgPC9hPntcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAgb3IgdmlzaXQgdGhle1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYXBwc3dfc3Bhbl9fbGlua1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly9tYXJrZXRwbGFjZS5tZW5kaXguY29tL1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsPVwibm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIE1hcmtldHBsYWNlXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvb3RlcjtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5leHBvcnQgY29uc3QgTUZfQ1VTVE9NX0FVVEhFTlRJQ0FUSU9OID0gXCJBcHBTd2l0Y2hlck1vZHVsZS5EU19DdXN0b21BdXRoZW50aWNhdGlvblwiO1xuXG5leHBvcnQgZW51bSBMb2FkaW5nU3RhdGUge1xuICAgIElkbGUgPSBcImlkbGVcIixcbiAgICBGZXRjaGluZyA9IFwiZmV0Y2hpbmdcIixcbiAgICBDb21wbGV0ZSA9IFwiY29tcGxldGVcIixcbiAgICBGYWlsZWQgPSBcImZhaWxlZFwiXG59XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50LCBSZWFjdEVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuY29uc3QgU2VhcmNoSWNvbiA9ICh7XG4gICAgc3Ryb2tlQ29sb3IsXG4gICAgd2lkdGggPSAzMixcbiAgICBoZWlnaHQgPSAzMixcbiAgICBjbGFzc05hbWUgPSBcIlwiXG59OiB7XG4gICAgc3Ryb2tlQ29sb3I6IHN0cmluZztcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgY2xhc3NOYW1lPzogc3RyaW5nO1xufSk6IFJlYWN0RWxlbWVudCA9PiAoXG4gICAgPHN2ZyB3aWR0aD17d2lkdGh9IGhlaWdodD17aGVpZ2h0fSBjbGFzc05hbWU9e2NsYXNzTmFtZX0gdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgc3Ryb2tlPXtzdHJva2VDb2xvcn1cbiAgICAgICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXG4gICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICBzdHJva2VXaWR0aD1cIjEuNVwiXG4gICAgICAgICAgICBkPVwiTTE0LjQwNiAxOC41NzNBNy44NzQgNy44NzQgMCAxMDguMjQ2IDQuMDhhNy44NzQgNy44NzQgMCAwMDYuMTYgMTQuNDkzek0xNi44OTMgMTYuODkzTDIzIDIzLjAwMVwiXG4gICAgICAgID48L3BhdGg+XG4gICAgPC9zdmc+XG4pO1xuXG5leHBvcnQgZGVmYXVsdCBTZWFyY2hJY29uO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgUmVhY3RFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IFNrZWxldG9uTG9hZGVyID0gKCk6IFJlYWN0RWxlbWVudCA9PiB7XG4gICAgY29uc3Qgc2tlbGV0b25Mb2FkZXJJdGVtcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIHNrZWxldG9uTG9hZGVySXRlbXMucHVzaChcbiAgICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9XCJhcHBzd19za2VsZXRvbi1sb2FkZXJfX2FwcC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcHBzd19za2VsZXRvbi1sb2FkZXJfX3NrZWxldG9uLWJveCBhcHBzd19hcHAtaXRlbV9faWNvblwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwc3dfYXBwLWl0ZW1fX25hbWUtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X3NrZWxldG9uLWxvYWRlcl9fc2tlbGV0b24tYm94IGFwcHN3X25hbWUtd3JhcHBlcl9fbmFtZVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwc3dfc2tlbGV0b24tbG9hZGVyX19za2VsZXRvbi1ib3ggYXBwc3dfYXBwLWl0ZW1fX2xpbmtcIj48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcHN3X0FwcFN3aXRjaGVyX19za2VsZXRvbi1sb2FkZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwc3dfc2tlbGV0b24tbG9hZGVyX19za2VsZXRvbi1ib3ggYXBwc3dfc2tlbGV0b24tbG9hZGVyX19ncm91cC10aXRsZVwiPjwvZGl2PlxuXG4gICAgICAgICAgICB7c2tlbGV0b25Mb2FkZXJJdGVtc31cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNrZWxldG9uTG9hZGVyO1xuIiwiaW1wb3J0IFJlYWN0LCB7IFJlYWN0RWxlbWVudCwgY3JlYXRlRWxlbWVudCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgQXBwTGlzdCBmcm9tIFwiLi9jb250ZW50L0FwcExpc3RcIjtcbmltcG9ydCB7IEFwcExpc3RSZXNwb25zZSB9IGZyb20gXCIuLi8uLi90eXBpbmdzL0FwcExpc3RSZXNwb25zZVwiO1xuaW1wb3J0IEZvb3RlciBmcm9tIFwiLi9Gb290ZXJcIjtcbmltcG9ydCB7IExvYWRpbmdTdGF0ZSB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCBTZWFyY2hJY29uIGZyb20gXCIuLi9yZXNvdXJjZXMvU2VhcmNoSWNvblwiO1xuaW1wb3J0IFNrZWxldG9uTG9hZGVyIGZyb20gXCIuL2NvbnRlbnQvU2tlbGV0b25Mb2FkZXJcIjtcbmltcG9ydCB7IEFwcFN3aXRjaGVyQ29udGVudFByb3BzIH0gZnJvbSBcIi4uLy4uL3R5cGluZ3MvQXBwU3dpdGNoZXJDb250ZW50UHJvcHNcIjtcblxuY29uc3QgQXBwU3dpdGNoZXJDb250ZW50ID0gKHtcbiAgICBhcHBMaXN0UmVzcG9uc2UsXG4gICAgYXBwTGlzdExvYWRpbmdTdGF0ZSxcbiAgICBzZXRGb3JjZVJlZnJlc2gsXG4gICAgYXV0aG9yaXphdGlvbkVycm9yLFxuICAgIGZvcmNlUmVmcmVzaCxcbiAgICBpc09wZW4sXG4gICAgcG9zaXRpb25pbmdcbn06IEFwcFN3aXRjaGVyQ29udGVudFByb3BzKTogUmVhY3RFbGVtZW50ID0+IHtcbiAgICBjb25zdCBbZmlsdGVyZWRBcHBMaXN0LCBzZXRGaWx0ZXJlZEFwcExpc3RdID0gdXNlU3RhdGU8QXBwTGlzdFJlc3BvbnNlW10gfCB1bmRlZmluZWQ+KCk7XG4gICAgY29uc3QgW3NlYXJjaFZhbHVlLCBzZXRTZWFyY2hWYWx1ZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2V0RmlsdGVyZWRBcHBMaXN0KGFwcExpc3RSZXNwb25zZSk7XG4gICAgfSwgW2FwcExpc3RSZXNwb25zZV0pO1xuXG4gICAgY29uc3Qgb25TZWFyY2hDaGFuZ2UgPSAoZXZlbnQ6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICBzZXRTZWFyY2hWYWx1ZShldmVudC50YXJnZXQudmFsdWUpO1xuXG4gICAgICAgIGlmIChzZWFyY2hRdWVyeSAhPT0gXCJcIikge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsdGVyQXBwTGlzdChzZWFyY2hRdWVyeSk7XG4gICAgICAgICAgICBzZXRGaWx0ZXJlZEFwcExpc3QocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEZpbHRlcmVkQXBwTGlzdChhcHBMaXN0UmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGZpbHRlckFwcExpc3QgPSAoc2VhcmNoUXVlcnk6IHN0cmluZyk6IEFwcExpc3RSZXNwb25zZVtdID0+IHtcbiAgICAgICAgcmV0dXJuIGFwcExpc3RSZXNwb25zZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGFwcExpc3RSZXNwb25zZS5maWx0ZXIoKHJlc3VsdDogQXBwTGlzdFJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LmFwcE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogW107XG4gICAgfTtcblxuICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBgYXBwc3dfQXBwU3dpdGNoZXJfX2NvbnRlbnQgJHtcbiAgICAgICAgcG9zaXRpb25pbmcgPT09IFwic2lkZWJhckxlZnRcIiAmJiBpc09wZW4gPyBcImFwcHN3X0FwcFN3aXRjaGVyX19jb250ZW50LS1vcGVuXCIgOiBcIlwiXG4gICAgfWA7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lc30+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhcHBzd19jb250ZW50X19zZWFyY2gtaW5wdXRcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoVmFsdWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uU2VhcmNoQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoIEFwcHNcIlxuICAgICAgICAgICAgICAgIG1heExlbmd0aD17NDB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPFNlYXJjaEljb24gY2xhc3NOYW1lPVwiYXBwc3dfc2VhcmNoLWlucHV0X19pY29uXCIgd2lkdGg9ezIyfSBoZWlnaHQ9ezIyfSBzdHJva2VDb2xvcj1cIiNGRkZGRkZcIiAvPlxuXG4gICAgICAgICAgICB7YXBwTGlzdExvYWRpbmdTdGF0ZSA9PT0gTG9hZGluZ1N0YXRlLkNvbXBsZXRlID8gKFxuICAgICAgICAgICAgICAgIDxBcHBMaXN0IGFwcExpc3Q9e2ZpbHRlcmVkQXBwTGlzdH0gc2V0Rm9yY2VSZWZyZXNoPXtzZXRGb3JjZVJlZnJlc2h9IGZvcmNlUmVmcmVzaD17Zm9yY2VSZWZyZXNofSAvPlxuICAgICAgICAgICAgKSA6IGFwcExpc3RMb2FkaW5nU3RhdGUgPT09IExvYWRpbmdTdGF0ZS5GYWlsZWQgfHwgYXV0aG9yaXphdGlvbkVycm9yID8gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImFwcHN3X2Vycm9yLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgTm8gYXBwIGhlcmU/IE5vIHdvcnJpZXMhIFRyeSB0byByZWZyZXNoIHRoZSBwYWdlIG9yIGNvbnRhY3QgeW91ciBhZG1pbi5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxTa2VsZXRvbkxvYWRlciAvPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPEZvb3RlciAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUmVhY3QubWVtbyhBcHBTd2l0Y2hlckNvbnRlbnQpO1xuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgUmVhY3RFbGVtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IFN3aXRjaGVySWNvbiA9ICh7XG4gICAgZG90c0ZpbGxDb2xvcixcbiAgICB3aWR0aCA9IDMwLFxuICAgIGhlaWdodCA9IDMwLFxuICAgIGNsYXNzTmFtZSA9IFwiXCJcbn06IHtcbiAgICBkb3RzRmlsbENvbG9yOiBzdHJpbmc7XG4gICAgd2lkdGg/OiBudW1iZXI7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGNsYXNzTmFtZT86IHN0cmluZztcbn0pOiBSZWFjdEVsZW1lbnQgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxzdmdcbiAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgICAgICBoZWlnaHQ9e2hlaWdodH1cbiAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMzIgMzJcIlxuICAgICAgICA+XG4gICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgIGlkPVwic3dpdGNoZXJJY29uRG90c1wiXG4gICAgICAgICAgICAgICAgZmlsbD17ZG90c0ZpbGxDb2xvcn1cbiAgICAgICAgICAgICAgICBmaWxsUnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgIGNsaXBSdWxlPVwiZXZlbm9kZFwiXG4gICAgICAgICAgICAgICAgZD1cIk04IDEwYTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0ek04IDE4YTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0ek0xNiAxOGEyIDIgMCAxMDAtNCAyIDIgMCAwMDAgNHpNMjQgMThhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6TTggMjZhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6TTE2IDI2YTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0ek0yNCAyNmEyIDIgMCAxMDAtNCAyIDIgMCAwMDAgNHpNMTYgMTBhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6TTI0IDEwYTIgMiAwIDEwMC00IDIgMiAwIDAwMCA0elwiXG4gICAgICAgICAgICAvPlxuICAgICAgICA8L3N2Zz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU3dpdGNoZXJJY29uO1xuIiwiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBTd2l0Y2hlckljb24gZnJvbSBcIi4uL3Jlc291cmNlcy9Td2l0Y2hlckljb25cIjtcblxuY29uc3QgVG9nZ2xlQnV0dG9uOiBSZWFjdC5GQzx7IG9uQ2xpY2s6IFJlYWN0Lk1vdXNlRXZlbnRIYW5kbGVyPEhUTUxFbGVtZW50PiB9PiA9ICh7IG9uQ2xpY2sgfSkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYXBwc3dfQXBwU3dpdGNoZXJfX3RvZ2dsZS1idXR0b25cIiBvbkNsaWNrPXtvbkNsaWNrfT5cbiAgICAgICAgICAgIDxTd2l0Y2hlckljb24gY2xhc3NOYW1lPVwiYXBwc3dfdG9nZ2UtYnV0dG9uX19zd2l0Y2hlci1pY29uXCIgZG90c0ZpbGxDb2xvcj1cIiNGRkZGRkZcIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVG9nZ2xlQnV0dG9uO1xuIiwiaW1wb3J0IHsgQ3VzdG9tQXV0aGVudGljYXRpb25EYXRhIH0gZnJvbSBcIi4uLy4uL3R5cGluZ3MvQ3VzdG9tQXV0aFRva2VuXCI7XG5pbXBvcnQgeyBNRl9DVVNUT01fQVVUSEVOVElDQVRJT04gfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBjb25zdCBnZXRDdXN0b21BdXRoVG9rZW4gPSBhc3luYyAoKTogUHJvbWlzZTxDdXN0b21BdXRoZW50aWNhdGlvbkRhdGE+ID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgUHJvbWlzZTxDdXN0b21BdXRoZW50aWNhdGlvbkRhdGE+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgd2luZG93Lm14LmRhdGEuYWN0aW9uKHtcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIGFjdGlvbm5hbWU6IE1GX0NVU1RPTV9BVVRIRU5USUNBVElPTlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAocmVzcG9uc2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbUF1dGhlbnRpY2F0aW9uOiBDdXN0b21BdXRoZW50aWNhdGlvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGN1c3RvbUF1dGhlbnRpY2F0aW9uKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyBBcHBMaXN0UmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vdHlwaW5ncy9BcHBMaXN0UmVzcG9uc2VcIjtcbmltcG9ydCB7IEN1c3RvbUF1dGhlbnRpY2F0aW9uRGF0YSB9IGZyb20gXCIuLi8uLi90eXBpbmdzL0N1c3RvbUF1dGhUb2tlblwiO1xuaW1wb3J0IHsgTG9hZGluZ1N0YXRlIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0Q3VzdG9tQXV0aFRva2VuIH0gZnJvbSBcIi4uL3V0aWxzL2hlbHBlclwiO1xuXG5jb25zdCB1c2VGZXRjaEFwcExpc3QgPSAoXG4gICAgaXNPcGVuOiBib29sZWFuLFxuICAgIGZvcmNlUmVmcmVzaDogYm9vbGVhbixcbiAgICBiYXNlVVJMOiBzdHJpbmdcbik6IHtcbiAgICBhdXRob3JpemF0aW9uRXJyb3I6IGJvb2xlYW47XG4gICAgYXBwTGlzdExvYWRpbmdTdGF0ZTogTG9hZGluZ1N0YXRlO1xuICAgIGFwcExpc3Q6IEFwcExpc3RSZXNwb25zZVtdO1xufSA9PiB7XG4gICAgY29uc3QgW2xvYWRpbmdTdGF0ZSwgc2V0TG9hZGluZ1N0YXRlXSA9IHVzZVN0YXRlPExvYWRpbmdTdGF0ZT4oTG9hZGluZ1N0YXRlLklkbGUpO1xuICAgIGNvbnN0IFthcHBMaXN0LCBzZXRBcHBMaXN0XSA9IHVzZVN0YXRlPEFwcExpc3RSZXNwb25zZVtdPihbXSk7XG4gICAgY29uc3QgW3Rva2VuSXNWYWxpZCwgc2V0VG9rZW5Jc1ZhbGlkXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgICBjb25zdCBbYXV0aG9yaXphdGlvbkVycm9yLCBzZXRBdXRob3JpemF0aW9uRXJyb3JdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICAgIGNvbnN0IFtmZXRjaENvdW50LCBzZXRGZXRjaENvdW50XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gICAgY29uc3QgW3RpbWVTdGFtcCwgc2V0VGltZVN0YW1wXSA9IHVzZVN0YXRlPERhdGU+KCk7XG4gICAgY29uc3QgW2F1dGhlbnRpY2F0aW9uRGF0YSwgc2V0QXV0aGVudGljYXRpb25EYXRhXSA9IHVzZVN0YXRlPEN1c3RvbUF1dGhlbnRpY2F0aW9uRGF0YT4oKTtcblxuICAgIGNvbnN0IHNob3VsZFJlZnJlc2hBdXRoVG9rZW4gPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgICAgIGlmICghdGltZVN0YW1wIHx8ICFhdXRoZW50aWNhdGlvbkRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgZGlmZkluU2Vjb25kcyA9IE1hdGgucm91bmQoKG5vdy5nZXRUaW1lKCkgLSB0aW1lU3RhbXAuZ2V0VGltZSgpKSAvIDEwMDApO1xuICAgICAgICByZXR1cm4gZGlmZkluU2Vjb25kcyA+PSBhdXRoZW50aWNhdGlvbkRhdGEudGltZVRvTGl2ZSB8fCBmZXRjaENvdW50ID49IGF1dGhlbnRpY2F0aW9uRGF0YS50aW1lc1RvVXNlO1xuICAgIH07XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoc2hvdWxkUmVmcmVzaEF1dGhUb2tlbigpKSB7XG4gICAgICAgICAgICBzZXRUb2tlbklzVmFsaWQoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgZmV0Y2hBcHBMaXN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW2F1dGhlbnRpY2F0aW9uRGF0YSwgZm9yY2VSZWZyZXNoLCBpc09wZW5dKTsgLy8gV2FybmluZzogZmV0Y2hBcHBMaXN0IGNhbid0IGJlIGFkZGVkIGFzIGRlcGVuZGVuY3kgYmVjYXVzZSBpdCB3aWxsIGNyZWF0ZSBhIGxvb3AuXG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXRva2VuSXNWYWxpZCkge1xuICAgICAgICAgICAgZ2V0Q3VzdG9tQXV0aFRva2VuKCkudGhlbihjdXN0b21BdXRoZW50aWNhdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXN0b21BdXRoZW50aWNhdGlvbi5hdXRob3JpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEF1dGhvcml6YXRpb25FcnJvcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRBdXRoZW50aWNhdGlvbkRhdGEoY3VzdG9tQXV0aGVudGljYXRpb24pO1xuICAgICAgICAgICAgICAgIHNldEZldGNoQ291bnQoMCk7XG4gICAgICAgICAgICAgICAgc2V0VG9rZW5Jc1ZhbGlkKHRydWUpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVTdGFtcChuZXcgRGF0ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwgW3Rva2VuSXNWYWxpZF0pO1xuXG4gICAgY29uc3QgZmV0Y2hBcHBMaXN0ID0gYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uRGF0YSB8fCAhYXV0aGVudGljYXRpb25EYXRhLmF1dGhvcml6YXRpb24gfHwgbG9hZGluZ1N0YXRlID09PSBMb2FkaW5nU3RhdGUuRmV0Y2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldExvYWRpbmdTdGF0ZShMb2FkaW5nU3RhdGUuRmV0Y2hpbmcpO1xuICAgICAgICBzZXRGZXRjaENvdW50KGZldGNoQ291bnQgPT4gZmV0Y2hDb3VudCArIDEpO1xuXG4gICAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VVUkx9L3VzZXJzLyR7YXV0aGVudGljYXRpb25EYXRhLnVzZXJJZH0vYXBwcz9yZWZyZXNoPSR7Zm9yY2VSZWZyZXNofWA7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYXV0aGVudGljYXRpb25EYXRhLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZldGNoKHVybCwgb3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rIHx8IHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VG9rZW5Jc1ZhbGlkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIHNldExvYWRpbmdTdGF0ZShMb2FkaW5nU3RhdGUuQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBqc29uO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGpzb24gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEFwcExpc3QoanNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VG9rZW5Jc1ZhbGlkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRMb2FkaW5nU3RhdGUoTG9hZGluZ1N0YXRlLkZhaWxlZCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkFwcFN3aXRjaGVyID4+IEludmFsaWQgdG9rZW4uIFBsZWFzZSByZWZyZXNoIGl0LlwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4geyBhdXRob3JpemF0aW9uRXJyb3IsIGFwcExpc3RMb2FkaW5nU3RhdGU6IGxvYWRpbmdTdGF0ZSwgYXBwTGlzdCB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlRmV0Y2hBcHBMaXN0O1xuIiwiaW1wb3J0IHsgUmVhY3RFbGVtZW50LCBjcmVhdGVFbGVtZW50LCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IEFwcFN3aXRjaGVyQ29udGVudCBmcm9tIFwiLi9BcHBTd2l0Y2hlckNvbnRlbnRcIjtcbmltcG9ydCBUb2dnbGVCdXR0b24gZnJvbSBcIi4vVG9nZ2xlQnV0dG9uXCI7XG5pbXBvcnQgdXNlRmV0Y2hBcHBMaXN0IGZyb20gXCIuLi9ob29rcy91c2VGZXRjaEFwcExpc3RcIjtcbmltcG9ydCB7IEFwcFN3aXRjaGVyQ29udGFpbmVyUHJvcHMgfSBmcm9tIFwiLi4vLi4vdHlwaW5ncy9BcHBTd2l0Y2hlclByb3BzXCI7XG5cbmNvbnN0IEFwcFN3aXRjaGVyQ29udGFpbmVyID0gKHByb3BzOiBBcHBTd2l0Y2hlckNvbnRhaW5lclByb3BzKTogUmVhY3RFbGVtZW50ID0+IHtcbiAgICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgY29uc3QgcmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgICBjb25zdCBbZm9yY2VSZWZyZXNoLCBzZXRGb3JjZVJlZnJlc2hdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICAgIGNvbnN0IHsgYXBwTGlzdExvYWRpbmdTdGF0ZSwgYXBwTGlzdCwgYXV0aG9yaXphdGlvbkVycm9yIH0gPSB1c2VGZXRjaEFwcExpc3QoaXNPcGVuLCBmb3JjZVJlZnJlc2gsIHByb3BzLmJhc2VVcmwpO1xuXG4gICAgY29uc3Qgb25Ub2dnbGUgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHNldElzT3BlbighaXNPcGVuKTtcbiAgICB9O1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3Qgb25PdXRzaWRlQ2xpY2sgPSAoZXZlbnQ6IEV2ZW50ICYgeyB0YXJnZXQ6IEVsZW1lbnQgfSk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgaWYgKGlzT3BlbiAmJiByZWYuY3VycmVudCAmJiAhcmVmLmN1cnJlbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHNldElzT3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgc2V0Rm9yY2VSZWZyZXNoKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uT3V0c2lkZUNsaWNrKTtcblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbk91dHNpZGVDbGljayk7XG4gICAgICAgIH07XG4gICAgfSwgW2lzT3Blbl0pO1xuXG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IGBhcHBzd19BcHBTd2l0Y2hlciAke1xuICAgICAgICBwcm9wcy5wb3NpdGlvbmluZyA9PT0gXCJzaWRlYmFyTGVmdFwiID8gXCJhcHBzd19BcHBTd2l0Y2hlci0tc2lkZWJhci1sZWZ0XCIgOiBcIlwiXG4gICAgfWA7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lc30gcmVmPXtyZWZ9PlxuICAgICAgICAgICAgPFRvZ2dsZUJ1dHRvbiBvbkNsaWNrPXtvblRvZ2dsZX0gLz5cbiAgICAgICAgICAgIHtpc09wZW4gJiYgKFxuICAgICAgICAgICAgICAgIDxBcHBTd2l0Y2hlckNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgYXBwTGlzdFJlc3BvbnNlPXthcHBMaXN0fVxuICAgICAgICAgICAgICAgICAgICBhcHBMaXN0TG9hZGluZ1N0YXRlPXthcHBMaXN0TG9hZGluZ1N0YXRlfVxuICAgICAgICAgICAgICAgICAgICBzZXRGb3JjZVJlZnJlc2g9e3NldEZvcmNlUmVmcmVzaH1cbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbkVycm9yPXthdXRob3JpemF0aW9uRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlUmVmcmVzaD17Zm9yY2VSZWZyZXNofVxuICAgICAgICAgICAgICAgICAgICBpc09wZW49e2lzT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25pbmc9e3Byb3BzLnBvc2l0aW9uaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQXBwU3dpdGNoZXJDb250YWluZXI7XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIFJlYWN0Tm9kZSwgY3JlYXRlRWxlbWVudCB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgQXBwU3dpdGNoZXJDb250YWluZXIgZnJvbSBcIi4vY29tcG9uZW50cy9BcHBTd2l0Y2hlckNvbnRhaW5lclwiO1xuaW1wb3J0IHsgQXBwU3dpdGNoZXJDb250YWluZXJQcm9wcyB9IGZyb20gXCIuLi90eXBpbmdzL0FwcFN3aXRjaGVyUHJvcHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwU3dpdGNoZXIgZXh0ZW5kcyBDb21wb25lbnQ8QXBwU3dpdGNoZXJDb250YWluZXJQcm9wcz4ge1xuICAgIHJlbmRlcigpOiBSZWFjdE5vZGUge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPEFwcFN3aXRjaGVyQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgYmFzZVVybD17dGhpcy5wcm9wcy5iYXNlVXJsfVxuICAgICAgICAgICAgICAgIHBvc2l0aW9uaW5nPXt0aGlzLnByb3BzLnBvc2l0aW9uaW5nfVxuICAgICAgICAgICAgICAgIG5hbWU9e1wiXCJ9XG4gICAgICAgICAgICAgICAgY2xhc3M9e1wiXCJ9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVFbGVtZW50IiwiQXBwTGlzdEl0ZW0iLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsIlJlYWN0IiwidXNlUmVmIiwiQXBwU3dpdGNoZXJDb250ZW50IiwiQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFFQSxNQUFNLGdCQUFnQixHQUFHLENBQUMsRUFDdEIsV0FBVyxFQUNYLEtBQUssR0FBRyxFQUFFLEVBQ1YsTUFBTSxHQUFHLEVBQUUsRUFDWCxTQUFTLEdBQUcsRUFBRSxFQU1qQixNQUNHQSw2QkFDSSxTQUFTLEVBQUUsU0FBUyxFQUNwQixLQUFLLEVBQUUsS0FBSyxFQUNaLE1BQU0sRUFBRSxNQUFNLEVBQ2QsT0FBTyxFQUFDLFdBQVcsRUFDbkIsSUFBSSxFQUFDLE1BQU0sRUFDWCxLQUFLLEVBQUMsNEJBQTRCO1FBRWxDQSw4QkFDSSxDQUFDLEVBQUMsdVNBQXVTLEVBQ3pTLE1BQU0sRUFBRSxXQUFXLEVBQ25CLFdBQVcsRUFBQyxLQUFLLEVBQ2pCLGFBQWEsRUFBQyxPQUFPLEVBQ3JCLGNBQWMsRUFBQyxPQUFPLEdBQ3hCO1FBQ0ZBLDhCQUFNLENBQUMsRUFBQyxvQkFBb0IsRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFDLFdBQVcsRUFBQyxLQUFLLEVBQUMsYUFBYSxFQUFDLE9BQU8sRUFBQyxjQUFjLEVBQUMsT0FBTyxH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
